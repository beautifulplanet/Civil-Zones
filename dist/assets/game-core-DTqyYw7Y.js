const Ne=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),y={TILE:48,W:250,H:250},v={BACKPACK_BASE:150,BACKPACK_PER_POP:100,SACK_CAPACITY:1e3,OVERFLOW_DELETE:!0},O={ABANDONED_YEARS:10,LIGHT_MAX:.3,MEDIUM_MAX:.8,EXTREME_MIN:.81},_=.1,A=50,B=1e4,G=50,L=2,U=1,D=.7,H={NO_ROAD_PENALTY:.05,WATER_BONUS_MAX:.5,FOREST_BONUS:.2,DECAY_RATE:.02,MIN_EFFICIENCY:.1},w={NEIGHBOR_BONUS:.1,TREE_BONUS:.25,WATER_BONUS:.5,WATER_RANGE:5,ISOLATION_PENALTY:.5,ISOLATION_RANGE:2,WEALTH_FOOD_MULTIPLIER:1.2,PATH_BONUS:.1,WELL_BONUS:.15,INDUSTRIAL_BONUS:.15},x={ROAD_ACCESS_BONUS:.5,NO_ROAD_PENALTY:.3,RES_WATER_BONUS:.3,RES_TREE_BONUS:.2,RES_CLUSTER_BONUS:.1,RES_INDUSTRIAL_PENALTY:.25,RES_WELL_BONUS:.15,COM_RES_NEARBY_BONUS:.4,COM_ROAD_JUNCTION_BONUS:.2,COM_INDUSTRIAL_NEARBY:.15},P=5e3,k=[{level:0,name:"Wanderer",popRequired:0,description:"Nomadic existence"},{level:1,name:"Settlement",popRequired:2,description:"First permanent homes"},{level:2,name:"Village",popRequired:20,description:"Small community forms"},{level:3,name:"Town",popRequired:100,description:"Organized society"},{level:4,name:"City",popRequired:500,description:"Urban development begins"},{level:5,name:"Metro",popRequired:2e3,description:"Metropolitan expansion"},{level:6,name:"Province",popRequired:7e3,description:"Regional power"},{level:7,name:"Region",popRequired:2e4,description:"Multi-city governance"},{level:8,name:"State",popRequired:6e4,description:"Organized state"},{level:9,name:"Nation",popRequired:18e4,description:"National identity"},{level:10,name:"Empire",popRequired:5e5,description:"Imperial expansion"},{level:11,name:"Dominion",popRequired:14e5,description:"Continental power"},{level:12,name:"Realm",popRequired:42e5,description:"Vast territories"},{level:13,name:"Dynasty",popRequired:13e6,description:"Generational rule"},{level:14,name:"Hegemony",popRequired:38e6,description:"Regional dominance"},{level:15,name:"Superpower",popRequired:115e6,description:"Global influence"},{level:16,name:"World Power",popRequired:345e6,description:"World leadership"},{level:17,name:"Hyperpower",popRequired:1e9,description:"Unmatched might"},{level:18,name:"Civilization",popRequired:31e8,description:"Peak civilization"},{level:19,name:"Eternal",popRequired:1e10,description:"Immortal legacy"}],F={RESIDENTIAL:["RES_1","RES_2","RES_3","RES_4","RES_5","RES_6"],INDUSTRIAL:["IND_1","IND_2","IND_3","IND_4","IND_5","IND_6"],COMMERCIAL:["COM_1","COM_2","COM_3","COM_4","COM_5","COM_6"],INFRASTRUCTURE:["WELL"],MILESTONE:["CLAN_CHIEF","DOCK"],SPECIAL:["CHIEF"]},h={RES_1:{id:"RES_1",category:"RESIDENTIAL",level:1,name:"Tree Shelter",cost:{food:100,wood:100,stone:0,metal:0},size:{w:1,h:1},capacity:15,overflowCapacity:20,upkeep:{wood:1,food:1},baseIncome:1,baseLifespan:20,stateThresholds:[{min:0,max:0,name:"Abandoned Nest",icon:"ðŸª¹",incomeClass:"NONE",lifespanBonus:0},{min:1,max:5,name:"Small Nest",icon:"ðŸªº",incomeClass:"LOW",incomeMult:.5,lifespanBonus:0},{min:6,max:10,name:"Tree Platform",icon:"ðŸŒ³",incomeClass:"MEDIUM",incomeMult:1,lifespanBonus:1},{min:11,max:15,name:"Sturdy Treehouse",icon:"ðŸ•ï¸",incomeClass:"HIGH",incomeMult:1.5,lifespanBonus:2}],benefits:[{type:"HOUSING",value:15},{type:"GATHER_BONUS",resource:"wood",value:2},{type:"GATHER_BONUS",resource:"food",value:2}],variants:[{name:"Abandoned Nest",icon:"ðŸª¹",bonusMult:0},{name:"Small Nest",icon:"ðŸªº",bonusMult:.5},{name:"Tree Platform",icon:"ðŸŒ³",bonusMult:1},{name:"Sturdy Treehouse",icon:"ðŸ•ï¸",bonusMult:1.5}],unlockReq:{pop:0}},RES_2:{id:"RES_2",category:"RESIDENTIAL",level:2,name:"Ground Pit",cost:{food:300,wood:300,stone:50,metal:0},size:{w:1,h:1},capacity:25,overflowCapacity:30,upkeep:{wood:2,food:2},baseIncome:3,baseLifespan:20,stateThresholds:[{min:0,max:0,name:"Collapsed Pit",icon:"ðŸ•³ï¸",incomeClass:"NONE",lifespanBonus:0},{min:1,max:8,name:"Shallow Scrape",icon:"â¬›",incomeClass:"LOW",incomeMult:.5,lifespanBonus:0},{min:9,max:17,name:"Dug Pit",icon:"ðŸŸ«",incomeClass:"MEDIUM",incomeMult:1,lifespanBonus:1},{min:18,max:25,name:"Covered Pit Dwelling",icon:"ðŸ ",incomeClass:"HIGH",incomeMult:1.5,lifespanBonus:2}],benefits:[{type:"HOUSING",value:25},{type:"GATHER_BONUS",resource:"wood",value:5},{type:"GATHER_BONUS",resource:"food",value:5},{type:"GATHER_BONUS",resource:"stone",value:1}],variants:[{name:"Collapsed Pit",icon:"ðŸ•³ï¸",bonusMult:0},{name:"Shallow Scrape",icon:"â¬›",bonusMult:.5},{name:"Dug Pit",icon:"ðŸŸ«",bonusMult:1},{name:"Covered Pit Dwelling",icon:"ðŸ ",bonusMult:1.5}],unlockReq:{pop:50}},RES_3:{id:"RES_3",category:"RESIDENTIAL",level:3,name:"Ground Cave",cost:{food:900,wood:900,stone:200,metal:0},size:{w:1,h:1},capacity:60,overflowCapacity:65,upkeep:{wood:3,food:3},baseIncome:8,baseLifespan:20,stateThresholds:[{min:0,max:0,name:"Collapsed Cave",icon:"ðŸª¨",incomeClass:"NONE",lifespanBonus:0},{min:1,max:20,name:"Small Cave",icon:"ðŸ•³ï¸",incomeClass:"LOW",incomeMult:.5,lifespanBonus:0},{min:21,max:40,name:"Deep Cave",icon:"â›°ï¸",incomeClass:"MEDIUM",incomeMult:1,lifespanBonus:1},{min:41,max:60,name:"Cave Complex",icon:"ðŸ”ï¸",incomeClass:"HIGH",incomeMult:1.5,lifespanBonus:2}],benefits:[{type:"HOUSING",value:60},{type:"GATHER_BONUS",resource:"wood",value:12},{type:"GATHER_BONUS",resource:"food",value:12},{type:"GATHER_BONUS",resource:"stone",value:3},{type:"GATHER_BONUS",resource:"metal",value:1}],variants:[{name:"Collapsed Cave",icon:"ðŸª¨",bonusMult:0},{name:"Small Cave",icon:"ðŸ•³ï¸",bonusMult:.5},{name:"Deep Cave",icon:"â›°ï¸",bonusMult:1},{name:"Cave Complex",icon:"ðŸ”ï¸",bonusMult:1.5}],unlockReq:{pop:200,buildings:{type:"COM",level:1,count:2}}},RES_4:{id:"RES_4",category:"RESIDENTIAL",level:4,name:"Tipi Village",cost:{food:2e3,wood:2e3,stone:40,metal:0},size:{w:1,h:1},capacity:50,overflowCapacity:55,upkeep:{wood:4,food:4},baseIncome:16,baseLifespan:25,stateThresholds:[{min:0,max:0,name:"Abandoned Tipis",icon:"â›º",incomeClass:"NONE",lifespanBonus:0},{min:1,max:16,name:"Small Camp",icon:"â›º",incomeClass:"LOW",incomeMult:.5,lifespanBonus:0},{min:17,max:33,name:"Tipi Circle",icon:"ðŸ•ï¸",incomeClass:"MEDIUM",incomeMult:1,lifespanBonus:2},{min:34,max:50,name:"Tipi Village",icon:"ðŸŽª",incomeClass:"HIGH",incomeMult:1.5,lifespanBonus:4}],benefits:[{type:"HOUSING",value:50},{type:"GATHER_BONUS",resource:"wood",value:20},{type:"GATHER_BONUS",resource:"food",value:20},{type:"GATHER_BONUS",resource:"stone",value:5}],variants:[{name:"Abandoned Tipis",icon:"â›º",bonusMult:0},{name:"Small Camp",icon:"â›º",bonusMult:.5},{name:"Tipi Circle",icon:"ðŸ•ï¸",bonusMult:1},{name:"Tipi Village",icon:"ðŸŽª",bonusMult:1.5}],unlockReq:{buildings:{id:"CLAN_CHIEF",count:1}},popUnlock:500},RES_5:{id:"RES_5",category:"RESIDENTIAL",level:5,name:"Log Longhouse",cost:{food:8e3,wood:8e3,stone:80,metal:0},size:{w:1,h:1},capacity:120,overflowCapacity:130,upkeep:{wood:6,food:6},baseIncome:32,baseLifespan:30,stateThresholds:[{min:0,max:0,name:"Ruined Longhouse",icon:"ðŸšï¸",incomeClass:"NONE",lifespanBonus:0},{min:1,max:40,name:"Small Longhouse",icon:"ðŸ ",incomeClass:"LOW",incomeMult:.5,lifespanBonus:0},{min:41,max:80,name:"Family Longhouse",icon:"ðŸ¡",incomeClass:"MEDIUM",incomeMult:1,lifespanBonus:3},{min:81,max:120,name:"Clan Longhouse",icon:"ðŸ˜ï¸",incomeClass:"HIGH",incomeMult:1.5,lifespanBonus:5}],benefits:[{type:"HOUSING",value:120},{type:"GATHER_BONUS",resource:"wood",value:40},{type:"GATHER_BONUS",resource:"food",value:40},{type:"GATHER_BONUS",resource:"stone",value:10},{type:"GATHER_BONUS",resource:"metal",value:3}],variants:[{name:"Ruined Longhouse",icon:"ðŸšï¸",bonusMult:0},{name:"Small Longhouse",icon:"ðŸ ",bonusMult:.5},{name:"Family Longhouse",icon:"ðŸ¡",bonusMult:1},{name:"Clan Longhouse",icon:"ðŸ˜ï¸",bonusMult:1.5}],unlockReq:{buildings:{id:"CLAN_CHIEF",count:1}},popUnlock:1e3},RES_6:{id:"RES_6",category:"RESIDENTIAL",level:6,name:"Old Growth Log Compound",cost:{food:2e4,wood:2e4,stone:100,metal:0},size:{w:1,h:1},capacity:240,overflowCapacity:260,upkeep:{wood:10,food:10},baseIncome:64,baseLifespan:35,stateThresholds:[{min:0,max:0,name:"Abandoned Compound",icon:"ðŸšï¸",incomeClass:"NONE",lifespanBonus:0},{min:1,max:80,name:"Small Compound",icon:"ðŸ˜ï¸",incomeClass:"LOW",incomeMult:.5,lifespanBonus:0},{min:81,max:160,name:"Growing Compound",icon:"ðŸ°",incomeClass:"MEDIUM",incomeMult:1,lifespanBonus:4},{min:161,max:240,name:"Grand Log Compound",icon:"ðŸ¯",incomeClass:"HIGH",incomeMult:1.5,lifespanBonus:7}],benefits:[{type:"HOUSING",value:240},{type:"GATHER_BONUS",resource:"wood",value:80},{type:"GATHER_BONUS",resource:"food",value:80},{type:"GATHER_BONUS",resource:"stone",value:20},{type:"GATHER_BONUS",resource:"metal",value:6}],variants:[{name:"Abandoned Compound",icon:"ðŸšï¸",bonusMult:0},{name:"Small Compound",icon:"ðŸ˜ï¸",bonusMult:.5},{name:"Growing Compound",icon:"ðŸ°",bonusMult:1},{name:"Grand Log Compound",icon:"ðŸ¯",bonusMult:1.5}],unlockReq:{buildings:{id:"CLAN_CHIEF",count:1}},popUnlock:2e3}},E={COM_1:{id:"COM_1",category:"COMMERCIAL",level:1,name:"Pebble Trade Fire",cost:{food:150,wood:150,stone:0,metal:0},size:{w:1,h:1},capacity:8,baseIncome:5,upkeep:{wood:1,food:0},benefits:[{type:"JOBS",value:8},{type:"INCOME",value:5},{type:"DESIRABILITY",radius:4,value:.2}],stateThresholds:[{min:0,max:0,name:"Cold Embers",icon:"â¬›",incomeMult:0},{min:.01,max:.3,name:"Pebble Trade Fire",icon:"ðŸ”¥",incomeMult:.5},{min:.31,max:.7,name:"Pebble Trade Fire",icon:"ðŸ”¥",incomeMult:1},{min:.71,max:1,name:"Busy Trade Fire",icon:"ðŸ”¥",incomeMult:1.5}],variants:[{name:"Cold Embers",icon:"â¬›",bonusMult:0},{name:"Pebble Trade Fire",icon:"ðŸ”¥",bonusMult:.5},{name:"Pebble Trade Fire",icon:"ðŸ”¥",bonusMult:1},{name:"Busy Trade Fire",icon:"ðŸ”¥",bonusMult:1.5}],popUnlock:10},COM_2:{id:"COM_2",category:"COMMERCIAL",level:2,name:"Squirrel Trade Camp",cost:{food:400,wood:400,stone:50,metal:0},size:{w:1,h:1},capacity:20,baseIncome:15,upkeep:{wood:2,food:0},benefits:[{type:"JOBS",value:20},{type:"INCOME",value:15},{type:"DESIRABILITY",radius:5,value:.3}],stateThresholds:[{min:0,max:0,name:"Empty Camp",icon:"ðŸ•ï¸",incomeMult:0},{min:.01,max:.3,name:"Squirrel Trade Camp",icon:"ðŸ¿ï¸",incomeMult:.5},{min:.31,max:.7,name:"Squirrel Trade Camp",icon:"ðŸ¿ï¸",incomeMult:1},{min:.71,max:1,name:"Busy Fur Camp",icon:"ðŸ¿ï¸",incomeMult:1.5}],variants:[{name:"Empty Camp",icon:"ðŸ•ï¸",bonusMult:0},{name:"Squirrel Trade Camp",icon:"ðŸ¿ï¸",bonusMult:.5},{name:"Squirrel Trade Camp",icon:"ðŸ¿ï¸",bonusMult:1},{name:"Busy Fur Camp",icon:"ðŸ¿ï¸",bonusMult:1.5}],popUnlock:40},COM_3:{id:"COM_3",category:"COMMERCIAL",level:3,name:"Fire Meet Camp",cost:{food:1200,wood:1200,stone:200,metal:0},size:{w:1,h:1},capacity:50,baseIncome:40,upkeep:{wood:3,food:0},benefits:[{type:"JOBS",value:50},{type:"INCOME",value:40},{type:"DESIRABILITY",radius:6,value:.4},{type:"CULTURE",value:5}],stateThresholds:[{min:0,max:0,name:"Cold Meeting Ground",icon:"â­•",incomeMult:0},{min:.01,max:.3,name:"Fire Meet Camp",icon:"ðŸ•ï¸",incomeMult:.5},{min:.31,max:.7,name:"Fire Meet Camp",icon:"ðŸ”¥",incomeMult:1},{min:.71,max:1,name:"Great Fire Gathering",icon:"ðŸŽ†",incomeMult:1.5}],variants:[{name:"Cold Meeting Ground",icon:"â­•",bonusMult:0},{name:"Fire Meet Camp",icon:"ðŸ•ï¸",bonusMult:.5},{name:"Fire Meet Camp",icon:"ðŸ”¥",bonusMult:1},{name:"Great Fire Gathering",icon:"ðŸŽ†",bonusMult:1.5}],popUnlock:150},COM_4:{id:"COM_4",category:"COMMERCIAL",level:4,name:"Barter Barrel",cost:{food:1600,wood:1600,stone:32,metal:0},size:{w:1,h:1},capacity:16,baseIncome:80,upkeep:{wood:4,food:0},benefits:[{type:"JOBS",value:16},{type:"INCOME",value:80},{type:"DESIRABILITY",radius:5,value:.35}],stateThresholds:[{min:0,max:0,name:"Empty Barrel",icon:"ðŸª£",incomeMult:0},{min:.01,max:.3,name:"Sparse Goods",icon:"ðŸª£",incomeMult:.5},{min:.31,max:.7,name:"Barter Barrel",icon:"ðŸ›¢ï¸",incomeMult:1},{min:.71,max:1,name:"Bustling Trade Post",icon:"ðŸ’°",incomeMult:1.5}],variants:[{name:"Empty Barrel",icon:"ðŸª£",bonusMult:0},{name:"Sparse Goods",icon:"ðŸª£",bonusMult:.5},{name:"Barter Barrel",icon:"ðŸ›¢ï¸",bonusMult:1},{name:"Bustling Trade Post",icon:"ðŸ’°",bonusMult:1.5}],unlockReq:{buildings:{id:"CLAN_CHIEF",count:1}},popUnlock:500},COM_5:{id:"COM_5",category:"COMMERCIAL",level:5,name:"Blanket Market",cost:{food:6400,wood:6400,stone:64,metal:0},size:{w:1,h:1},capacity:40,baseIncome:160,upkeep:{wood:6,food:0},benefits:[{type:"JOBS",value:40},{type:"INCOME",value:160},{type:"DESIRABILITY",radius:6,value:.45},{type:"CULTURE",value:8}],stateThresholds:[{min:0,max:0,name:"Empty Market",icon:"ðŸ§º",incomeMult:0},{min:.01,max:.3,name:"Few Blankets",icon:"ðŸ§º",incomeMult:.5},{min:.31,max:.7,name:"Blanket Market",icon:"ðŸ›ï¸",incomeMult:1},{min:.71,max:1,name:"Grand Market Fair",icon:"ðŸŽª",incomeMult:1.5}],variants:[{name:"Empty Market",icon:"ðŸ§º",bonusMult:0},{name:"Few Blankets",icon:"ðŸ§º",bonusMult:.5},{name:"Blanket Market",icon:"ðŸ›ï¸",bonusMult:1},{name:"Grand Market Fair",icon:"ðŸŽª",bonusMult:1.5}],unlockReq:{buildings:{id:"CLAN_CHIEF",count:1}},popUnlock:1e3},COM_6:{id:"COM_6",category:"COMMERCIAL",level:6,name:"Bear Market",cost:{food:16e3,wood:16e3,stone:80,metal:0},size:{w:1,h:1},capacity:100,baseIncome:320,upkeep:{wood:10,food:0},benefits:[{type:"JOBS",value:100},{type:"INCOME",value:320},{type:"DESIRABILITY",radius:7,value:.55},{type:"CULTURE",value:15}],stateThresholds:[{min:0,max:0,name:"Abandoned Market",icon:"ðŸ»",incomeMult:0},{min:.01,max:.3,name:"Quiet Trading",icon:"ðŸ»",incomeMult:.5},{min:.31,max:.7,name:"Bear Market",icon:"ðŸª",incomeMult:1},{min:.71,max:1,name:"Great Bear Exchange",icon:"ðŸ›ï¸",incomeMult:1.5}],variants:[{name:"Abandoned Market",icon:"ðŸ»",bonusMult:0},{name:"Quiet Trading",icon:"ðŸ»",bonusMult:.5},{name:"Bear Market",icon:"ðŸª",bonusMult:1},{name:"Great Bear Exchange",icon:"ðŸ›ï¸",bonusMult:1.5}],unlockReq:{buildings:{id:"CLAN_CHIEF",count:1}},popUnlock:2e3}},M={IND_1:{id:"IND_1",category:"INDUSTRIAL",level:1,name:"Bird Hunting Range",cost:{food:200,wood:200,stone:0,metal:0},size:{w:1,h:1},capacity:10,baseProduction:10,upkeep:{wood:1,food:1},benefits:[{type:"JOBS",value:10},{type:"GATHER_BONUS",resource:"food",value:5},{type:"DESIRABILITY",radius:3,value:.1}],stateThresholds:[{min:0,max:0,name:"Empty Range",icon:"ðŸª¶",productionMult:0},{min:.01,max:.3,name:"Sparse Hunting Path",icon:"ðŸª¶",productionMult:.5},{min:.31,max:.7,name:"Bird Hunting Range",icon:"ðŸ¦…",productionMult:1},{min:.71,max:1,name:"Prime Fowling Grounds",icon:"ðŸŽ¯",productionMult:1.5}],variants:[{name:"Empty Range",icon:"ðŸª¶",bonusMult:0},{name:"Sparse Hunting Path",icon:"ðŸª¶",bonusMult:.5},{name:"Bird Hunting Range",icon:"ðŸ¦…",bonusMult:1},{name:"Prime Fowling Grounds",icon:"ðŸŽ¯",bonusMult:1.5}],popUnlock:2},IND_2:{id:"IND_2",category:"INDUSTRIAL",level:2,name:"Grub Digging Pit",cost:{food:500,wood:500,stone:100,metal:0},size:{w:1,h:1},capacity:25,baseProduction:25,upkeep:{wood:2,food:1},benefits:[{type:"JOBS",value:25},{type:"GATHER_BONUS",resource:"food",value:10},{type:"GATHER_BONUS",resource:"stone",value:2},{type:"DESIRABILITY",radius:3,value:.1}],stateThresholds:[{min:0,max:0,name:"Filled Hole",icon:"ðŸ•³ï¸",productionMult:0},{min:.01,max:.3,name:"Scratched Earth",icon:"ðŸ•³ï¸",productionMult:.5},{min:.31,max:.7,name:"Grub Digging Pit",icon:"ðŸª±",productionMult:1},{min:.71,max:1,name:"Bountiful Foraging Pit",icon:"ðŸ–",productionMult:1.5}],variants:[{name:"Filled Hole",icon:"ðŸ•³ï¸",bonusMult:0},{name:"Scratched Earth",icon:"ðŸ•³ï¸",bonusMult:.5},{name:"Grub Digging Pit",icon:"ðŸª±",bonusMult:1},{name:"Bountiful Foraging Pit",icon:"ðŸ–",bonusMult:1.5}],popUnlock:50},IND_3:{id:"IND_3",category:"INDUSTRIAL",level:3,name:"Stone Knapping Site",cost:{food:1500,wood:1500,stone:500,metal:0},size:{w:1,h:1},capacity:60,baseProduction:60,upkeep:{wood:3,food:1},benefits:[{type:"JOBS",value:60},{type:"GATHER_BONUS",resource:"food",value:15},{type:"GATHER_BONUS",resource:"stone",value:10},{type:"GATHER_BONUS",resource:"metal",value:3},{type:"DESIRABILITY",radius:4,value:.15}],stateThresholds:[{min:0,max:0,name:"Abandoned Site",icon:"ðŸª¨",productionMult:0},{min:.01,max:.3,name:"Scattered Flakes",icon:"ðŸª¨",productionMult:.5},{min:.31,max:.7,name:"Stone Knapping Site",icon:"âš’ï¸",productionMult:1},{min:.71,max:1,name:"Master Flint Workshop",icon:"ðŸ”¨",productionMult:1.5}],variants:[{name:"Abandoned Site",icon:"ðŸª¨",bonusMult:0},{name:"Scattered Flakes",icon:"ðŸª¨",bonusMult:.5},{name:"Stone Knapping Site",icon:"âš’ï¸",bonusMult:1},{name:"Master Flint Workshop",icon:"ðŸ”¨",bonusMult:1.5}],popUnlock:200},IND_4:{id:"IND_4",category:"INDUSTRIAL",level:4,name:"Turtle Hunting Ground",cost:{food:2400,wood:2400,stone:48,metal:0},size:{w:1,h:1},capacity:20,baseProduction:50,upkeep:{wood:4,food:2},benefits:[{type:"JOBS",value:20},{type:"GATHER_BONUS",resource:"food",value:30},{type:"GATHER_BONUS",resource:"stone",value:15},{type:"DESIRABILITY",radius:4,value:.2}],stateThresholds:[{min:0,max:0,name:"Empty Grounds",icon:"ðŸ¢",productionMult:0},{min:.01,max:.3,name:"Sparse Hunting",icon:"ðŸ¢",productionMult:.5},{min:.31,max:.7,name:"Turtle Hunting Ground",icon:"ðŸŽ¯",productionMult:1},{min:.71,max:1,name:"Prime Turtle Territory",icon:"ðŸ†",productionMult:1.5}],variants:[{name:"Empty Grounds",icon:"ðŸ¢",bonusMult:0},{name:"Sparse Hunting",icon:"ðŸ¢",bonusMult:.5},{name:"Turtle Hunting Ground",icon:"ðŸŽ¯",bonusMult:1},{name:"Prime Turtle Territory",icon:"ðŸ†",bonusMult:1.5}],unlockReq:{buildings:{id:"CLAN_CHIEF",count:1}},popUnlock:500},IND_5:{id:"IND_5",category:"INDUSTRIAL",level:5,name:"Bear Pit",cost:{food:9600,wood:9600,stone:96,metal:0},size:{w:1,h:1},capacity:50,baseProduction:120,upkeep:{wood:6,food:3},benefits:[{type:"JOBS",value:50},{type:"GATHER_BONUS",resource:"food",value:60},{type:"GATHER_BONUS",resource:"stone",value:25},{type:"GATHER_BONUS",resource:"metal",value:8},{type:"DESIRABILITY",radius:5,value:.25}],stateThresholds:[{min:0,max:0,name:"Abandoned Pit",icon:"ðŸ»",productionMult:0},{min:.01,max:.3,name:"Small Bear Trap",icon:"ðŸ»",productionMult:.5},{min:.31,max:.7,name:"Bear Pit",icon:"âš”ï¸",productionMult:1},{min:.71,max:1,name:"Great Bear Hunting Ground",icon:"ðŸ¹",productionMult:1.5}],variants:[{name:"Abandoned Pit",icon:"ðŸ»",bonusMult:0},{name:"Small Bear Trap",icon:"ðŸ»",bonusMult:.5},{name:"Bear Pit",icon:"âš”ï¸",bonusMult:1},{name:"Great Bear Hunting Ground",icon:"ðŸ¹",bonusMult:1.5}],unlockReq:{buildings:{id:"CLAN_CHIEF",count:1}},popUnlock:1e3},IND_6:{id:"IND_6",category:"INDUSTRIAL",level:6,name:"Buffalo Grounds",cost:{food:24e3,wood:24e3,stone:120,metal:0},size:{w:1,h:1},capacity:120,baseProduction:240,upkeep:{wood:10,food:5},benefits:[{type:"JOBS",value:120},{type:"GATHER_BONUS",resource:"food",value:120},{type:"GATHER_BONUS",resource:"stone",value:40},{type:"GATHER_BONUS",resource:"metal",value:15},{type:"DESIRABILITY",radius:6,value:.3}],stateThresholds:[{min:0,max:0,name:"Empty Plains",icon:"ðŸ¦¬",productionMult:0},{min:.01,max:.3,name:"Sparse Herd Grounds",icon:"ðŸ¦¬",productionMult:.5},{min:.31,max:.7,name:"Buffalo Grounds",icon:"ðŸ¹",productionMult:1},{min:.71,max:1,name:"Great Buffalo Hunt",icon:"âš¡",productionMult:1.5}],variants:[{name:"Empty Plains",icon:"ðŸ¦¬",bonusMult:0},{name:"Sparse Herd Grounds",icon:"ðŸ¦¬",bonusMult:.5},{name:"Buffalo Grounds",icon:"ðŸ¹",bonusMult:1},{name:"Great Buffalo Hunt",icon:"âš¡",bonusMult:1.5}],unlockReq:{buildings:{id:"CLAN_CHIEF",count:1}},popUnlock:2e3}},S={WELL:{id:"WELL",category:"SPECIAL",level:1,name:"Water Well",cost:{food:50,wood:200,stone:5,metal:0},size:{w:1,h:1},capacity:0,upkeep:{wood:0,food:0},benefits:[{type:"WATER_ACCESS",value:100},{type:"DESIRABILITY",radius:6,value:.15}],stateThresholds:[],variants:[{name:"Dry Well",icon:"ðŸ•³ï¸",bonusMult:0},{name:"Water Well",icon:"ðŸ’§",bonusMult:1}],popUnlock:0}},I={CLAN_CHIEF:{id:"CLAN_CHIEF",category:"MILESTONE",level:1,name:"Clan Chief's Hut",cost:{food:1e5,wood:1e5,stone:0,metal:0},size:{w:2,h:2},capacity:0,upkeep:{wood:5,food:5},unique:!0,benefits:[{type:"DESIRABILITY",radius:50,value:2},{type:"CULTURE",value:25}],stateThresholds:[],variants:[{name:"Clan Chief's Hut",icon:"ðŸ›ï¸",bonusMult:1}],unlockReq:{pop:500,resources:{food:1e5,wood:1e5}},milestoneBonus:{type:"UNLOCK_TIER",value:4}},DOCK:{id:"DOCK",category:"MILESTONE",level:2,name:"First Dock",cost:{food:5e5,wood:5e5,stone:0,metal:0},size:{w:3,h:2},capacity:0,upkeep:{wood:15,food:10},unique:!0,benefits:[{type:"DESIRABILITY",radius:60,value:3},{type:"CULTURE",value:50},{type:"INCOME",value:500}],stateThresholds:[],variants:[{name:"First Dock",icon:"âš“",bonusMult:1}],unlockReq:{pop:2e3,buildings:{id:"CLAN_CHIEF",count:1},resources:{food:5e5,wood:5e5}},milestoneBonus:{type:"UNLOCK_TIER",value:7}}},q={CHIEF:{id:"CHIEF",category:"SPECIAL",level:1,name:"First Chief's Hut",cost:{food:1e4,wood:0,stone:0,metal:0},size:{w:2,h:2},capacity:0,upkeep:{wood:0,food:0},benefits:[{type:"DESIRABILITY",radius:50,value:2},{type:"CULTURE",value:10}],stateThresholds:[],variants:[{name:"First Chief's Hut",icon:"ðŸ›ï¸",bonusMult:1}],popUnlock:0}},C={...S,...I,...q},c={...h,...E,...M,...C};function W(o){return c[o]||null}function z(o){return Object.values(c).filter(e=>e.category===o)}function Y(o){return Object.entries(c).filter(([e])=>e.startsWith(o)).map(([,e])=>e)}function j(o){return c[`RES_${o}`]||null}function V(o){return c[`COM_${o}`]||null}function K(o){return c[`IND_${o}`]||null}function J(o){const e={wood:0,food:0,stone:0,metal:0};if(!o.benefits)return e;for(const n of o.benefits)n.type==="GATHER_BONUS"&&"resource"in n&&(e[n.resource]=n.value);return e}function X(o,e,n,t){const i=c[o];if(!i)return!1;const a=i.unlockReq;if(!a)return!0;if(a.pop!==void 0&&e<a.pop)return!1;if(a.resources){for(const[s,r]of Object.entries(a.resources))if((n[s]||0)<r)return!1}if(a.buildings){const s=Array.isArray(a.buildings)?a.buildings:[a.buildings];for(const r of s)if("id"in r&&t.filter(l=>l.id===r.id).length<r.count)return!1}return!0}const ye=Object.freeze(Object.defineProperty({__proto__:null,BUILDING_CATEGORIES:F,BUILDING_DB:c,BULLDOZE_REFUND:_,CHIEF_BONUS:L,CHIEF_COST:B,CHIEF_RADIUS:G,COMMERCIAL_BUILDINGS:E,DECAY_THRESHOLD:D,DESIRABILITY:w,EFFICIENCY:H,ERAS:k,GOLD_EXCHANGE_RATE:P,GROWTH_THRESHOLD:U,INDUSTRIAL_BUILDINGS:M,INFRASTRUCTURE_BUILDINGS:S,INVENTORY:v,MAP_CONFIG:y,MILESTONE_BUILDINGS:I,RESIDENTIAL_BUILDINGS:h,SPECIAL_BUILDINGS:C,VISUAL_STATES:O,ZONE_BONUSES:x,ZONE_COST:A,extractGatherBonus:J,getBuilding:W,getBuildingsByCategory:z,getBuildingsByType:Y,getCommercialByLevel:V,getIndustrialByLevel:K,getResidentialByLevel:j,isBuildingUnlocked:X},Symbol.toStringTag,{value:"Module"}));class R{seed=1;init(e){this.seed=e}hash(e,n){const t=Math.sin(e*12.98+n*78.23+this.seed)*43758.54;return t-Math.floor(t)}mix(e,n,t){return e*(1-t)+n*t}val(e,n){const t=Math.floor(e),i=Math.floor(n),a=e-t,s=n-i,r=a*a*(3-2*a),u=s*s*(3-2*s),l=this.hash(t,i),p=this.hash(t+1,i),f=this.hash(t,i+1),N=this.hash(t+1,i+1);return this.mix(this.mix(l,p,r),this.mix(f,N,r),u)}fbm(e,n,t=5){let i=0,a=.5,s=1;for(let r=0;r<t;r++)i+=this.val(e*s,n*s)*a,s*=2,a*=.5;return i}}const m=new R;function d(o,e,n){return Math.max(e,Math.min(n,o))}function Z(o,e,n){return o+(e-o)*d(n,0,1)}function $(o,e,n){const t=d((n-o)/(e-o),0,1);return t*t*(3-2*t)}function Q(o){return o>=1e9?(o/1e9).toFixed(1)+"B":o>=1e6?(o/1e6).toFixed(1)+"M":o>=1e3?(o/1e3).toFixed(1)+"K":o.toFixed(0)}function ee(o){return o.toLocaleString()}function oe(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}function ne(o,e,n,t){return Math.abs(o-n)+Math.abs(e-t)}function T(o,e,n,t){const i=n-o,a=t-e;return Math.sqrt(i*i+a*a)}function te(o,e,n,t,i){return T(o,e,n,t)<=i}function ie(o,e,n,t){return o>=0&&o<n&&e>=0&&e<t}function ae(o){return JSON.parse(JSON.stringify(o))}function se(o,e){return Math.floor(Math.random()*(e-o+1))+o}function g(o,e){return Math.random()*(e-o)+o}function re(o){if(o.length!==0)return o[Math.floor(Math.random()*o.length)]}function ue(o){for(let e=o.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[o[e],o[n]]=[o[n],o[e]]}return o}function le(o,e){let n=null;return function(...t){n&&clearTimeout(n),n=setTimeout(()=>o(...t),e)}}function ce(o,e){let n=0;return function(...t){const i=Date.now();i-n>=e&&(n=i,o(...t))}}function me(o){return function(){o|=0,o=o+1831565813|0;let e=Math.imul(o^o>>>15,1|o);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}function de(o,e){return[{x:o,y:e-1},{x:o,y:e+1},{x:o-1,y:e},{x:o+1,y:e}]}function pe(o,e){return[{x:o-1,y:e-1},{x:o,y:e-1},{x:o+1,y:e-1},{x:o-1,y:e},{x:o+1,y:e},{x:o-1,y:e+1},{x:o,y:e+1},{x:o+1,y:e+1}]}function fe(o,e){return e===0?0:d(o/e*100,0,100)}function he(o,e=0){return(o*100).toFixed(e)+"%"}const Ee={seed:1,width:250,height:250,seaLevelBase:3,patchSize:8,numPatches:25};class Me{config;highGroundPatches=[];constructor(e={}){this.config={...Ee,...e}}generateHighGroundPatches(){this.highGroundPatches=[];const{width:e,height:n,patchSize:t,numPatches:i}=this.config;for(let a=0;a<i;a++){const s=Math.floor(Math.random()*(e-t-10))+5,r=Math.floor(Math.random()*(n-t-10))+5;this.highGroundPatches.push({x:s,y:r})}}isInHighGroundPatch(e,n){const{patchSize:t}=this.config;for(const i of this.highGroundPatches)if(e>=i.x&&e<i.x+t&&n>=i.y&&n<i.y+t)return!0;return!1}determineTerrainType(e,n,t,i){const a=m.fbm(e*.015+1e3,n*.015+1e3)/1.8,s=m.fbm(e*.02,n*.02)/1.8,r=m.fbm(e*.08+500,n*.08+500)/1.8,u=m.fbm(e*.05+100,n*.05+100)/1.8,l=Math.abs(u-.5)<.015;return a>.68&&s>.55?"STONE":t<i-1.5?"DEEP":t<i-.5||r<.03&&t>=i&&t<i+.5?"WATER":l&&!this.isInHighGroundPatch(e,n)?"RIVER":t<=i?"SAND":t<7?"GRASS":t<8?"FOREST":t<9.5?"ROCK":"SNOW"}calculateElevation(e,n){const t=m.fbm(e*.02,n*.02)/1.8;let i=Math.round(t*100+25)/10;return i=d(i,0,10),this.isInHighGroundPatch(e,n)&&(i=7+g(0,1.5)),i}generateTile(e,n,t){let i=this.calculateElevation(e,n),a=this.determineTerrainType(e,n,i,t);a==="STONE"?i=9+Math.floor(Math.random()*2):a==="DEEP"?i=Math.max(0,i):a==="WATER"&&i>=t?i=t-.5:a==="RIVER"&&(i=t);const r=(a==="GRASS"||a==="FOREST"||a==="SNOW")&&Math.random()>.8,u={type:a,originalType:a,elevation:i,road:!1,tree:r,pol:0,bld:null,explored:!1,zone:null,building:null,resource:null,stoneDeposit:null,entity:null};return a==="STONE"&&(u.resource={type:"STONE",amount:1e6+Math.floor(Math.random()*5e5),metal_yield:.2}),u}generate(e){e!==void 0&&(this.config.seed=e),m.init(this.config.seed),this.generateHighGroundPatches();const{width:n,height:t,seaLevelBase:i}=this.config,a=[];for(let s=0;s<n;s++){a[s]=[];for(let r=0;r<t;r++)a[s][r]=this.generateTile(s,r,i)}return a}getHighGroundPatches(){return[...this.highGroundPatches]}}function Se(o){return o!=="WATER"&&o!=="DEEP"&&o!=="STONE"}function Ie(o){return o==="GRASS"||o==="SAND"||o==="FOREST"}function Ce(o){return o==="WATER"||o==="DEEP"||o==="RIVER"}function Re(o){return{GRASS:"#4a7c23",FOREST:"#2d5016",SAND:"#c2b280",ROCK:"#6b6b6b",STONE:"#4a4a4a",SNOW:"#f0f0f0",WATER:"#4a90d9",DEEP:"#1a5276",RIVER:"#5dade2"}[o]||"#888888"}function Te(o){return{GRASS:1,FOREST:1.5,SAND:1.2,ROCK:2,STONE:1/0,SNOW:1.5,WATER:1/0,DEEP:1/0,RIVER:2}[o]||1}class ge{grid;cellSize;width;height;constructor(e,n,t=16){this.cellSize=t,this.width=Math.ceil(e/t),this.height=Math.ceil(n/t),this.grid=[];for(let i=0;i<this.width;i++){this.grid[i]=[];for(let a=0;a<this.height;a++)this.grid[i][a]=[]}}toGridCoords(e,n){return{gx:Math.floor(e/this.cellSize),gy:Math.floor(n/this.cellSize)}}isValidGridCoord(e,n){return e>=0&&n>=0&&e<this.width&&n<this.height}add(e,n,t){const{gx:i,gy:a}=this.toGridCoords(e,n);this.isValidGridCoord(i,a)&&this.grid[i][a].push(t)}remove(e,n,t){const{gx:i,gy:a}=this.toGridCoords(e,n);if(!this.isValidGridCoord(i,a))return!1;const s=this.grid[i][a].indexOf(t);return s!==-1?(this.grid[i][a].splice(s,1),!0):!1}getAt(e,n){const{gx:t,gy:i}=this.toGridCoords(e,n);return this.isValidGridCoord(t,i)?[...this.grid[t][i]]:[]}getNearby(e,n,t=1){const{gx:i,gy:a}=this.toGridCoords(e,n),s=Math.ceil(t/this.cellSize),r=[];for(let u=-s;u<=s;u++)for(let l=-s;l<=s;l++){const p=i+u,f=a+l;this.isValidGridCoord(p,f)&&r.push(...this.grid[p][f])}return r}getAll(){const e=[];for(let n=0;n<this.width;n++)for(let t=0;t<this.height;t++)e.push(...this.grid[n][t]);return e}clear(){for(let e=0;e<this.width;e++)for(let n=0;n<this.height;n++)this.grid[e][n]=[]}count(){let e=0;for(let n=0;n<this.width;n++)for(let t=0;t<this.height;t++)e+=this.grid[n][t].length;return e}}class b{pool=[];factory;constructor(e,n=100){this.factory=e;for(let t=0;t<n;t++){const i=e();i.active=!1,this.pool.push(i)}}acquire(){for(const n of this.pool)if(!n.active)return n.active=!0,n;const e=this.factory();return e.active=!0,this.pool.push(e),e}release(e){e.active=!1}releaseAll(){for(const e of this.pool)e.active=!1}getActive(){return this.pool.filter(e=>e.active)}getStats(){const e=this.pool.filter(n=>n.active).length;return{total:this.pool.length,active:e,available:this.pool.length-e}}}function be(o=500){return new b(()=>({x:0,y:0,vx:0,vy:0,life:0,maxLife:1,color:"#ffffff",size:2,active:!1}),o)}const ve=Object.freeze(Object.defineProperty({__proto__:null,Noise:m,NoiseGenerator:R,ObjectPool:b,SpatialGrid:ge,TerrainGenerator:Me,clamp:d,createParticlePool:be,createSeededRandom:me,debounce:le,deepClone:ae,euclideanDistance:T,formatNumber:Q,formatWithCommas:ee,generateUID:oe,getAdjacent4:de,getAdjacent8:pe,getTerrainColor:Re,getTerrainMoveCost:Te,isInBounds:ie,isInCircle:te,isTerrainBuildable:Ie,isTerrainPassable:Se,isWater:Ce,lerp:Z,manhattanDistance:ne,percent:fe,randomFloat:g,randomInt:se,randomPick:re,shuffle:ue,smoothstep:$,throttle:ce,toPercentString:he},Symbol.toStringTag,{value:"Module"}));export{ve as C,Ne as T,ye as a};
//# sourceMappingURL=game-core-DTqyYw7Y.js.map
