const N={DEEP:"#4A6B8A",WATER:"#6B8FAD",RIVER:"#7FA0B8",SAND:"#D4C4A8",GRASS:"#C9D4A0",FOREST:"#8B9A6B",EARTH:"#C4A882",ROCK:"#9A9A8A",SNOW:"#E8E8E0",STONE:"#8A8A7A"},k={ROAD:"#A89070",RES:"#C4946A",COM:"#B8A060",IND:"#8A7A6A",WELL:"#6A8A9A",BASKET:"#B89A70",POTTERY:"#A8906A",GRANARY:"#9A8A70",PALACE:"#D4B480",CHIEF:"#C4A070",CLAN_CHIEF:"#D4B060",DOCK:"#5A7A8A"},W={PARCHMENT:"#E8DCC8",INK:"#3A3020",SEPIA:"#704020",FOG_OF_WAR:"#C8B8A0"},H={OK:"rgba(180,160,120,0.5)",NO:"rgba(160,80,60,0.85)",PANEL_BG:"rgba(40,35,30,0.95)",PANEL_BORDER:"rgba(180,160,120,0.5)",TEXT_PRIMARY:"#E8DCC8",TEXT_SECONDARY:"#A09080",TEXT_HIGHLIGHT:"#FFD700",TEXT_DANGER:"#FF6666",TEXT_SUCCESS:"#66FF66",BUTTON_BG:"rgba(80,70,60,0.8)",BUTTON_HOVER:"rgba(100,90,80,0.9)",BUTTON_ACTIVE:"rgba(120,100,80,1.0)"},Z={R:{fill:"rgba(100,180,100,0.3)",stroke:"#4A8A4A"},C:{fill:"rgba(100,100,200,0.3)",stroke:"#4A4A9A"},I:{fill:"rgba(180,140,60,0.3)",stroke:"#9A8A3A"}};function Q(e,t=.5){let o,n,i;return e<.3?(o=255,n=Math.floor(e*850),i=0):e<.7?(o=Math.floor(255-(e-.3)*600),n=255,i=0):e<1.2?(o=0,n=255,i=Math.floor((e-.7)*510)):(o=0,n=Math.floor(255-(e-1.2)*200),i=255),`rgba(${o},${n},${i},${t})`}function J(e,t,o){const n=t-o;return e==="WATER"||e==="DEEP"||e==="RIVER"?"rgba(0, 50, 150, 0.4)":n<0?"rgba(255, 0, 0, 0.5)":n<.5?"rgba(255, 100, 0, 0.45)":n<1?"rgba(255, 200, 0, 0.4)":n<2?"rgba(0, 180, 0, 0.3)":"rgba(0, 100, 255, 0.25)"}function x(e){const t=30+e*5,o=40+e*8,n=45+e*5;return{wall:`hsl(${t}, ${o}%, ${n}%)`,wallDark:`hsl(${t}, ${o}%, ${n-15}%)`,roof:`hsl(${t-10}, ${o-10}%, ${n-10}%)`,roofDark:`hsl(${t-10}, ${o-10}%, ${n-25}%)`,wood:`hsl(${t+5}, ${o-20}%, ${n-5}%)`,woodDark:`hsl(${t+5}, ${o-20}%, ${n-20}%)`}}const ee={WOOD_CHIP:["#B8956A","#A08050","#C8A878","#9A7548"],DUST:["#C8B8A0","#B8A890","#D8C8B0","#A89880"],WATER_SPLASH:["#6B9FCF","#5A8FC0","#7CAFDF","#4A7FB0"],FIRE:["#FF6600","#FF9900","#FFCC00","#FF3300"],SMOKE:["#666666","#555555","#777777","#444444"],SPARKLE:["#FFFFFF","#FFFFCC","#FFFF99","#FFFFFF"]},te={SKIN:"#DDA675",SKIN_DARK:"#B8865C",SKIN_LIGHT:"#C9966C",HAIR:"#5D3A1A",FUR_TUNIC:"#A0522D",FUR_DARK:"#6B3A1E",FUR_TEXTURE:"#8B4513",BELT_BONE:"#F5F5DC",BELT_DARK:"#B8A080",FUR_BOOTS:"#8B6914",BOOTS_DARK:"#5D4510",CLUB_WOOD:"#8B7355",CLUB_WOOD_DARK:"#5D4E3A",CLUB_STONE:"#808080",CLUB_STONE_DARK:"#555555",NOMAD_BODY:"#8B5A2B",NOMAD_SPEAR:"#8B7355",NOMAD_SPEARTIP:"#555555",WOLF:"#666666",WOLF_LIGHT:"#888888",DEER:"#8B6914",DEER_LIGHT:"#A08030"},oe={BUSH:"#60C060",BUSH_HIGHLIGHT:"#90E890",SAFE:{light:"#FF90B0",mid:"#FF6090",dark:"#E04070"},POISON:{light:"#E0B0FF",mid:"#C878F0",dark:"#A050D0"}},ne={...N,...k,...W,...H};function b(e,t,o,n,i,s){const r=Math.min(s,n/2,i/2);e.beginPath(),e.moveTo(t+r,o),e.lineTo(t+n-r,o),e.quadraticCurveTo(t+n,o,t+n,o+r),e.lineTo(t+n,o+i-r),e.quadraticCurveTo(t+n,o+i,t+n-r,o+i),e.lineTo(t+r,o+i),e.quadraticCurveTo(t,o+i,t,o+i-r),e.lineTo(t,o+r),e.quadraticCurveTo(t,o,t+r,o),e.closePath()}function ie(e,t,o,n,i,s){b(e,t,o,n,i,s),e.fill()}function se(e,t,o,n,i,s){b(e,t,o,n,i,s),e.stroke()}function re(e,t,o,n,i,s,r,a){b(e,t,o,n,i,s),r&&(e.fillStyle=r,e.fill()),a&&(e.strokeStyle=a,e.stroke())}function le(e,t,o,n,i,s){e.beginPath(),e.arc(t,o,n,0,Math.PI*2),i&&(e.fillStyle=i,e.fill()),s&&(e.strokeStyle=s,e.stroke())}function ae(e,t,o,n,i,s=0,r,a){e.beginPath(),e.ellipse(t,o,n,i,s,0,Math.PI*2),r&&(e.fillStyle=r,e.fill()),a&&(e.strokeStyle=a,e.stroke())}function ce(e,t,o,n,i,s,r=1){e.strokeStyle=s,e.lineWidth=r,e.beginPath(),e.moveTo(t,o),e.lineTo(n,i),e.stroke()}function de(e,t,o,n){if(!(t.length<3)){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let i=1;i<t.length;i++)e.lineTo(t[i].x,t[i].y);e.closePath(),o&&(e.fillStyle=o,e.fill()),n&&(e.strokeStyle=n,e.stroke())}}function ue(e,t,o,n,i,s,r,a,c=1){e.strokeStyle=a,e.lineWidth=c,e.beginPath(),e.moveTo(t,o),e.quadraticCurveTo(n,i,s,r),e.stroke()}function fe(e,t,o,n,i,s,r,a,c,l,f=1){e.strokeStyle=l,e.lineWidth=f,e.beginPath(),e.moveTo(t,o),e.bezierCurveTo(n,i,s,r,a,c),e.stroke()}function he(e,t,o,n,i={}){const{font:s="12px sans-serif",fillStyle:r="#FFFFFF",align:a="left",baseline:c="alphabetic",shadow:l}=i;e.font=s,e.fillStyle=r,e.textAlign=a,e.textBaseline=c,l&&(e.shadowColor=l.color,e.shadowBlur=l.blur,e.shadowOffsetX=l.offsetX||0,e.shadowOffsetY=l.offsetY||0),e.fillText(t,o,n),l&&(e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}function ge(e,t,o,n,i,s,r="12px sans-serif",a=2){e.font=r,e.textAlign="center",e.textBaseline="middle",e.strokeStyle=s,e.lineWidth=a,e.strokeText(t,o,n),e.fillStyle=i,e.fillText(t,o,n)}function pe(e,t,o,n,i,s,r){const a=e.createRadialGradient(t-n*.3,o-n*.3,n*.1,t,o,n);return a.addColorStop(0,i),a.addColorStop(.5,s),a.addColorStop(1,r),a}function ye(e,t,o,n,i,s){const r=e.createLinearGradient(t,o,n,i);for(const a of s)r.addColorStop(a.offset,a.color);return r}function me(e,t,o,n,i){e.save(),e.translate(t,o),e.rotate(n),e.translate(-t,-o),i(),e.restore()}function ve(e,t,o,n,i,s){e.save(),e.translate(t,o),e.scale(n,i),e.translate(-t,-o),s(),e.restore()}function Ae(e,t,o){const n=e.globalAlpha;e.globalAlpha=t,o(),e.globalAlpha=n}function Ce(e,t,o,n,i,s){e.save(),e.beginPath(),e.rect(t,o,n,i),e.clip(),s(),e.restore()}function Te(e,t,o,n,i){e.save(),e.beginPath(),e.arc(t,o,n,0,Math.PI*2),e.clip(),i(),e.restore()}function Ee(e,t,o,n,i,s,r,a=1){e.fillStyle=r;const c=Math.floor(n*i*s);for(let l=0;l<c;l++){const f=Math.random()*n,y=Math.random()*i;e.fillRect(t+f,o+y,a,a)}}function we(e,t,o,n,i,s,r,a,c=.5){e.save(),e.strokeStyle=a,e.lineWidth=c,e.beginPath(),e.rect(t,o,n,i),e.clip();const l=Math.cos(r),f=Math.sin(r),y=Math.sqrt(n*n+i*i);for(let C=-y;C<y;C+=s){const M=t+n/2+C*l-y*f,O=o+i/2+C*f+y*l,j=t+n/2+C*l+y*f,q=o+i/2+C*f-y*l;e.beginPath(),e.moveTo(M,O),e.lineTo(j,q),e.stroke()}e.restore()}const $={minZoom:.5,maxZoom:3,zoomSpeed:.1,panSpeed:10};function Fe(e=0,t=0,o=1){return{x:e,y:t,z:o}}function Le(e,t,o,n=1){return{x:e*o/2,y:t*o/2,z:n}}function L(e,t,o,n){const i=o.x+(e-n.width/2)/o.z,s=o.y+(t-n.height/2)/o.z;return{x:i,y:s}}function U(e,t,o,n){const i=n.width/2+(e-o.x)*o.z,s=n.height/2+(t-o.y)*o.z;return{x:i,y:s}}function be(e,t,o,n,i){const s=L(e,t,o,n);return{x:Math.floor(s.x/i),y:Math.floor(s.y/i)}}function Re(e,t,o,n,i){const s=e*i+i/2,r=t*i+i/2;return U(s,r,o,n)}function Be(e,t,o,n,i){const s=t.width/e.z/2,r=t.height/e.z/2,a=Math.max(0,Math.floor((e.x-s)/o)),c=Math.min(n,Math.ceil((e.x+s)/o)),l=Math.max(0,Math.floor((e.y-r)/o)),f=Math.min(i,Math.ceil((e.y+r)/o));return{startCol:a,endCol:c,startRow:l,endRow:f}}function Me(e,t,o,n,i){const s=n.width/o.z/2,r=n.height/o.z/2,a=e*i,c=a+i,l=t*i,f=l+i,y=o.x-s,C=o.x+s,M=o.y-r,O=o.y+r;return!(c<y||a>C||f<M||l>O)}function Oe(e,t,o){return{...e,x:e.x+t/e.z,y:e.y+o/e.z}}function Se(e,t,o){return{...e,x:t,y:o}}function Ie(e,t,o,n){return{...e,x:t*n+n/2,y:o*n+n/2}}function $e(e,t,o=$){const n=Math.max(o.minZoom,Math.min(o.maxZoom,e.z+t*o.zoomSpeed));return{...e,z:n}}function De(e,t,o,n,i,s=$){const r=L(t,o,e,n),a=Math.max(s.minZoom,Math.min(s.maxZoom,e.z+i*s.zoomSpeed)),c={...e,z:a},l=L(t,o,c,n);return{x:e.x+(r.x-l.x),y:e.y+(r.y-l.y),z:a}}function Pe(e,t,o,n,i){const s=o*i,r=n*i,a=t.width/e.z/2,c=t.height/e.z/2;let l=e.x;a*2>=s?l=s/2:l=Math.max(a,Math.min(s-a,l));let f=e.y;return c*2>=r?f=r/2:f=Math.max(c,Math.min(r-c,f)),{x:l,y:f,z:e.z}}function _e(e,t,o){e.save(),e.translate(o.width/2,o.height/2),e.scale(t.z,t.z),e.translate(-t.x,-t.y)}function Ne(e){e.restore()}class ke{pool=[];maxSize;constructor(t=500,o=1e3){this.maxSize=o;for(let n=0;n<t;n++)this.pool.push(this.createParticle())}createParticle(){return{x:0,y:0,vx:0,vy:0,life:0,maxLife:0,color:"",size:1,active:!1}}get(t,o,n,i,s,r,a=2){for(const l of this.pool)if(!l.active)return l.x=t,l.y=o,l.vx=n,l.vy=i,l.life=s,l.maxLife=s,l.color=r,l.size=a,l.active=!0,l;if(this.pool.length<this.maxSize){const l=this.createParticle();return l.x=t,l.y=o,l.vx=n,l.vy=i,l.life=s,l.maxLife=s,l.color=r,l.size=a,l.active=!0,this.pool.push(l),l}const c=this.pool[0];return c.x=t,c.y=o,c.vx=n,c.vy=i,c.life=s,c.maxLife=s,c.color=r,c.size=a,c.active=!0,c}update(t,o=.1){for(const n of this.pool)n.active&&(n.x+=n.vx*t,n.y+=n.vy*t,n.vy+=o*t,n.life-=t,n.life<=0&&(n.active=!1))}getActive(){return this.pool.filter(t=>t.active)}clear(){for(const t of this.pool)t.active=!1}}class We{effects=[];add(t,o,n,i,s){this.effects.push({type:t,x:o,y:n,start:performance.now(),duration:i,data:s})}addWoodChips(t,o){const n=[];for(let i=0;i<8;i++){const s=Math.PI*2*(i/8)+Math.random()*.3,r=.5+Math.random()*.7;n.push({angle:s,speed:r})}this.add("woodchips",t,o,600,{chips:n})}addDust(t,o){const n=[];for(let i=0;i<6;i++){const s=Math.PI*2*(i/6),r=.18+i%2*.06;n.push({angle:s,radius:r})}this.add("dust",t,o,9e3,{puffs:n})}addWaterSplash(t,o){this.add("water_splash",t,o,500)}addImpactStars(t,o){this.add("impact_stars",t,o,300)}update(){const t=performance.now();this.effects=this.effects.filter(o=>t-o.start<o.duration)}getActive(){return this.effects}getProgress(t){const o=performance.now()-t.start;return Math.min(1,o/t.duration)}clear(){this.effects=[]}}function He(e,t,o){const n=e.speed*t*o,i=t*t*o*.3;return{x:Math.cos(e.angle)*n,y:Math.sin(e.angle)*n+i,alpha:1-t}}function Ue(e,t,o){const n=Math.sin(t*Math.PI)*.5,i=(e.radius+n)*o;return{x:Math.cos(e.angle)*i,y:Math.sin(e.angle)*i,size:o*(.2+n*.3),alpha:(1-t)*.6}}function Ve(e,t=3){const o=[];for(let n=0;n<t;n++){const i=Math.PI*2*(n/t)+e*2,s=e*20,r=(1-e)*4;o.push({x:Math.cos(i)*s,y:Math.sin(i)*s,size:r})}return o}const Rt=Object.freeze(Object.defineProperty({__proto__:null,ALL_COLORS:ne,BERRY_COLORS:oe,BUILDING_COLORS:k,CHARACTER_COLORS:te,DEFAULT_CAMERA_CONFIG:$,EffectManager:We,MAP_COLORS:W,PARTICLE_COLORS:ee,ParticlePool:ke,TERRAIN_COLORS:N,UI_COLORS:H,ZONE_COLORS:Z,applyCameraTransform:_e,centerCameraOn:Se,centerCameraOnTile:Ie,clampCameraToMap:Pe,createCamera:Fe,createCenteredCamera:Le,createLinearGradient:ye,createSphereGradient:pe,drawBezierCurve:fe,drawCircle:le,drawEllipse:ae,drawHatching:we,drawLine:ce,drawPolygon:de,drawQuadraticCurve:ue,drawRoundRect:re,drawStipple:Ee,drawText:he,drawTextWithOutline:ge,fillRoundRect:ie,generateLevelColors:x,getDesirabilityColor:Q,getDustPuffSize:Ue,getElevationOverlayColor:J,getImpactStarPositions:Ve,getVisibleTileRange:Be,getWoodChipPosition:He,isTileVisible:Me,panCamera:Oe,restoreCameraTransform:Ne,roundRectPath:b,screenToTile:be,screenToWorld:L,strokeRoundRect:se,tileToScreen:Re,withAlpha:Ae,withCircularClip:Te,withClip:Ce,withRotation:me,withScale:ve,worldToScreen:U,zoomCamera:$e,zoomCameraAt:De},Symbol.toStringTag,{value:"Module"})),Ye=[{mode:"NORMAL",icon:"üëÅÔ∏è",title:"Normal View",description:"Standard game view"},{mode:"DESIRABILITY",icon:"üî•",title:"Desirability Heatmap",description:"Shows land value"},{mode:"BIRDSEYE",icon:"üé®",title:"Birds Eye View",description:"Clean view without UI"},{mode:"POL",icon:"‚ò¢Ô∏è",title:"Pollution View",description:"Shows pollution levels"}],m={housing:"#FF6B6B",water:"#4ECDC4",food:"#FFD93D",jobs:"#6BCF7F",paths:"#A78BFA"},E=2e3,D=200,R=500;let v={message:"",isVisible:!1,isError:!1,timeoutId:null},T=null;function Ge(e="toast"){T=document.getElementById(e),T||console.warn(`Toast element with id '${e}' not found`)}function B(e,t={}){const{duration:o=E,isError:n=!1,persistent:i=!1}=t;v.timeoutId!==null&&(clearTimeout(v.timeoutId),v.timeoutId=null),v.message=e,v.isVisible=!0,v.isError=n,T&&(T.innerText=e,T.style.opacity="1",T.style.background=n?"#F44336":"rgba(0, 0, 0, 0.85)"),je(),i||(v.timeoutId=window.setTimeout(()=>{V()},o))}function V(){v.isVisible=!1,v.timeoutId=null,T&&(T.style.opacity="0")}function ze(e,t=E){B(e,{isError:!0,duration:t})}function Ke(e,t=E){B(`‚úÖ ${e}`,{duration:t})}function Xe(e,t=E){B(`‚ö†Ô∏è ${e}`,{duration:t})}function je(e){new Date().toLocaleTimeString()}class qe{element=null;state;playerLog=[];technicalLog=[];currentYear=0;constructor(t="toast"){this.element=document.getElementById(t),this.state={message:"",isVisible:!1,isError:!1,timeoutId:null}}setYear(t){this.currentYear=t}show(t,o={}){const{duration:n=E,isError:i=!1,persistent:s=!1}=o;this.state.timeoutId!==null&&clearTimeout(this.state.timeoutId),this.state.message=t,this.state.isVisible=!0,this.state.isError=i,this.element&&(this.element.innerText=t,this.element.style.opacity="1",this.element.style.background=i?"#F44336":"rgba(0, 0, 0, 0.85)");const r=`[Y${this.currentYear}]`;this.playerLog.push(`${r} ${t}`),this.playerLog.length>D&&this.playerLog.shift();const a=new Date().toLocaleTimeString();this.technicalLog.push(`[${a}] ${t}`),this.technicalLog.length>R&&this.technicalLog.shift(),s||(this.state.timeoutId=window.setTimeout(()=>this.hide(),n))}hide(){this.state.isVisible=!1,this.state.timeoutId=null,this.element&&(this.element.style.opacity="0")}error(t){this.show(t,{isError:!0})}success(t){this.show(`‚úÖ ${t}`)}warning(t){this.show(`‚ö†Ô∏è ${t}`)}getPlayerLog(){return[...this.playerLog]}getTechnicalLog(){return[...this.technicalLog]}}let A={activeMenu:null,selectedLevel:1};function Y(e){const t=document.getElementById(e);t&&(t.style.display="block",A.activeMenu=e)}function P(e){const t=document.getElementById(e);t&&(t.style.display="none",A.activeMenu===e&&(A.activeMenu=null))}function G(){const e=["building-menu-panel","industrial-menu-panel","commercial-menu-panel","storage-menu-panel","special-menu-panel","road-menu-panel","milestone-menu-panel","stats-menu","log-modal"];for(const t of e)P(t);A.activeMenu=null}function Ze(e){A.activeMenu===e?P(e):(G(),Y(e))}function Qe(e){return e?A.activeMenu===e:A.activeMenu!==null}function Je(e){A.selectedLevel=e}function xe(){return A.selectedLevel}function et(e,t){document.querySelectorAll(`${e} .level-card`).forEach(i=>{i.classList.remove("selected")});const n=document.getElementById(t);n&&!n.classList.contains("level-locked")&&n.classList.add("selected")}function tt(e){const t=document.getElementById(e);t&&(t.style.display="block")}function ot(e){const t=document.getElementById(e);t&&(t.style.display="none")}function nt(e,t,o,n){const i=document.getElementById(e);if(!i)return;const s=i.querySelector(".modal-title, h3, h2"),r=i.querySelector(".modal-content, .content");s&&(s.textContent=t),r&&(r.innerHTML=o),i.style.display="flex",n&&tt(n)}function it(e,t){const o=document.getElementById(e);o&&(o.style.display="none"),t&&ot(t)}function st(e){let t="";return t+='<div style="margin-bottom:10px;"><strong style="color:#81C784;">‚è±Ô∏è Progress</strong></div>',t+=`<div>Year: ${e.year}</div>`,t+=`<div>Turns Played: ${e.turn}</div>`,t+=`<div>Game Mode: ${e.gameState}</div>`,e.gameState==="CITY"&&(t+='<div style="margin: 15px 0 10px 0;"><strong style="color:#FF7043;">üë• Population</strong></div>',t+=`<div>Total Population: ${S(e.population)}</div>`,t+=`<div>Population Capacity: ${S(e.populationCap)}</div>`,t+=`<div>Residential Buildings: ${e.buildings.residential}</div>`,t+=`<div>Average Res Level: ${e.avgResLevel.toFixed(1)}</div>`),t+='<div style="margin: 15px 0 10px 0;"><strong style="color:#4CAF50;">üåæ Resources</strong></div>',t+=`<div>Food Collected: ${S(e.totalFoodCollected)}</div>`,e.gameState==="WANDER"&&(t+=`<div>Nomads Found: ${e.nomadsFound}</div>`),e.gameState==="CITY"&&(t+='<div style="margin: 15px 0 10px 0;"><strong style="color:#2196F3;">üèóÔ∏è Buildings</strong></div>',t+=`<div>Residential: ${e.buildings.residential}</div>`,t+=`<div>Commercial: ${e.buildings.commercial}</div>`,t+=`<div>Industrial: ${e.buildings.industrial}</div>`,t+=`<div>Wells: ${e.buildings.wells}</div>`,t+=`<div>Total Buildings: ${e.buildings.total}</div>`),t+='<div style="margin: 15px 0 10px 0;"><strong style="color:#9C27B0;">üîì Progress</strong></div>',t+=`<div>Unlocked Res Levels: ${e.unlockedLevels.length}</div>`,t+=`<div>Highest Unlocked: Level ${Math.max(...e.unlockedLevels,0)}</div>`,t}function S(e){return e>=1e18?(e/1e18).toFixed(1)+"Qi":e>=1e15?(e/1e15).toFixed(1)+"Q":e>=1e12?(e/1e12).toFixed(1)+"T":e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":Math.floor(e).toString()}function h(e){return e>=1e18?(e/1e18).toFixed(1)+"Qi":e>=1e15?(e/1e15).toFixed(1)+"Q":e>=1e12?(e/1e12).toFixed(1)+"T":e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":Math.floor(e).toString()}function g(e,t){const o=document.getElementById(e);o&&(o.innerText=typeof t=="number"?h(t):t)}function d(e,t,o="flex"){const n=document.getElementById(e);n&&(n.style.display=t?o:"none")}function rt(e){const t=e.isWanderMode?h(e.current):`${h(e.current)}/${h(e.cap)}`;g("v-pop",t)}function lt(e,t){if(t&&e.inventory){const o=e.inventory.food+e.inventory.wood+e.inventory.metal+e.inventory.stone;g("v-food",`${h(e.inventory.food)}/${h(e.inventory.capacity)}`),g("v-wood",h(e.inventory.wood));const n=(e.inventory.metal||0)+(e.pocket?.metal||0),i=(e.inventory.stone||0)+(e.pocket?.stone||0);g("v-metal",h(n)),g("v-stone",h(i)),g("v-inventory",`${h(o)}/${h(e.inventory.capacity)}`),d("stat-inventory",!0),d("stat-wood",!0),d("stat-metal",!0),d("stat-stone",!0)}else{g("v-food",h(e.food)),g("v-wood",h(e.wood));const o=e.metal+(e.pocket?.metal||0),n=e.stone+(e.pocket?.stone||0);g("v-metal",h(o)),g("v-stone",h(n)),d("stat-inventory",!1),d("stat-wood",!0),d("stat-metal",!0),d("stat-stone",!0)}g("v-res",h(e.gold))}function at(e){const t=e.wellCount*e.capacityPerWell,o=Math.min(e.population,t),n=t>0?Math.round(o/t*100):0;let i;t===0?i="‚ö†Ô∏è No wells!":e.population>t?i=`üî¥ OVER CAPACITY! (${e.population}/${t})`:n>80?i=`üü° ${n}% capacity`:i=`üü¢ ${n}% capacity`,g("v-wat",i)}function ct(e,t,o=100){const n=Math.max(1,Math.ceil(t/o)),i=e>0?Math.round(t/(e*o)*100):0;let s;if(e>=n)s=`üü¢ ${e} wells (${i}% capacity)`;else if(e>0){const r=n-e;s=`üî¥ ${e} wells (${r} more needed!)`}else s="‚ö†Ô∏è No wells built!";g("v-wells",s),d("stat-wells",!0)}function dt(e,t=!0){if(d("stat-thirst",t),!t)return;const o=document.getElementById("v-thirst");o&&(o.innerText=e.toString(),e>50?o.style.color="#29B6F6":e>25?o.style.color="#FFA726":o.style.color="#E53935")}function ut(e,t){const o=[];return e.housing.satisfied<.5?o.push({type:"housing",message:`üè† Housing CRITICAL (${e.housing.shortage} homeless)`,severity:"critical",color:m.housing}):e.housing.satisfied<.8&&o.push({type:"housing",message:`üè† Housing needed (${e.housing.shortage} shortage)`,severity:"warning",color:m.housing}),e.water.satisfied<.5&&t>=10?o.push({type:"water",message:`üíß Water CRITICAL (need ${e.water.shortage} wells)`,severity:"critical",color:m.water}):e.water.satisfied<.8&&t>=10&&o.push({type:"water",message:`üíß Water needed (${e.water.shortage} wells)`,severity:"warning",color:m.water}),e.food.satisfied<.3?o.push({type:"food",message:"üåæ Food CRITICAL - reserves low!",severity:"critical",color:m.food}):e.food.satisfied<.6&&o.push({type:"food",message:"üåæ Food low - build industry",severity:"warning",color:m.food}),e.jobs.satisfied<.7&&t>20&&o.push({type:"jobs",message:`üíº Jobs needed (${e.jobs.shortage} unemployed)`,severity:"warning",color:m.jobs}),e.paths.satisfied<.5&&o.push({type:"paths",message:`üõ§Ô∏è Paths needed (${e.paths.shortage} tiles)`,severity:"warning",color:m.paths}),o}function ft(e,t,o){const n=document.getElementById("needs-warning-panel"),i=document.getElementById("needs-list"),s=document.getElementById("satisfaction-bar");if(!o||t<5){n&&(n.style.display="none");return}const r=ut(e,t);if(i&&(r.length===0?(i.innerHTML='<span style="color: #6BCF7F;">‚úì All needs met!</span>',n&&(n.style.border="2px solid #6BCF7F",n.style.boxShadow="0 8px 25px rgba(107,207,127,0.3)")):(i.innerHTML=r.map(a=>`<div>‚Ä¢ ${a.message}</div>`).join(""),n&&(n.style.border="2px solid #FF6B6B",n.style.boxShadow="0 8px 25px rgba(255,107,107,0.3)"))),s){const a=e.overall||1,c=Math.floor(a*100);s.style.width=a*100+"%",s.textContent=c+"%",a>=.8?s.style.background="linear-gradient(90deg, #6BCF7F 0%, #4CAF50 100%)":a>=.5?s.style.background="linear-gradient(90deg, #FFD93D 0%, #FFA726 100%)":s.style.background="linear-gradient(90deg, #FF6B6B 0%, #C62828 100%)"}n&&(n.style.display="block")}function ht(){d("stat-thirst",!0),d("stat-inventory",!0),d("stat-wander-wells",!0),d("stat-year",!1),d("stat-water",!1),d("stat-funds",!1),d("btn-settle",!0,"inline-block")}function gt(){d("stat-thirst",!1),d("stat-inventory",!1),d("stat-wander-wells",!1),d("stat-year",!0),d("stat-water",!0),d("stat-funds",!0),d("btn-settle",!1)}let u={playerLog:[],technicalLog:[],currentView:"player",maxEntries:R},p=null,I=null;function pt(e){p||(I=e||null,p={log:console.log.bind(console),error:console.error.bind(console),warn:console.warn.bind(console),info:console.info.bind(console)},console.log=function(...t){p.log(...t),w("LOG",F(t))},console.error=function(...t){p.error(...t);const o=F(t);if(w("ERROR",o),I){const n=o.length>80?o.substring(0,80)+"...":o;I(`‚ö†Ô∏è ERROR: ${n}`)}},console.warn=function(...t){p.warn(...t),w("WARN",F(t))},console.info=function(...t){p.info(...t),w("INFO",F(t))})}function yt(){p&&(console.log=p.log,console.error=p.error,console.warn=p.warn,console.info=p.info,p=null)}function F(e){return e.map(t=>{if(typeof t=="object")try{return JSON.stringify(t)}catch{return String(t)}return String(t)}).join(" ")}function mt(e,t=0){const o={timestamp:`[Y${t}]`,level:"INFO",message:e};for(u.playerLog.push(o);u.playerLog.length>D;)u.playerLog.shift()}function w(e,t){const o={timestamp:new Date().toLocaleTimeString(),level:e,message:t};for(u.technicalLog.push(o);u.technicalLog.length>R;)u.technicalLog.shift()}function z(){return u.playerLog.map(e=>`${e.timestamp} ${e.message}`)}function K(){return u.technicalLog.map(e=>`[${e.timestamp}] [${e.level}] ${e.message}`)}function vt(e){return e==="player"?[...u.playerLog]:[...u.technicalLog]}function At(){return u.currentView}function X(e){u.currentView=e}function _(e="log-content"){const t=document.getElementById(e);if(!t)return;const o=u.currentView==="player"?z():K();o.length===0?t.innerText=u.currentView==="player"?"No player events logged yet.":"No technical events logged yet.":t.innerText=o.join(`
`),t.scrollTop=t.scrollHeight}function Ct(e,t="btn-player-log",o="btn-technical-log"){X(e);const n=document.getElementById(t),i=document.getElementById(o);e==="player"?(n&&(n.style.background="#4CAF50",n.style.fontWeight="bold"),i&&(i.style.background="#333",i.style.fontWeight="normal")):(n&&(n.style.background="#333",n.style.fontWeight="normal"),i&&(i.style.background="#4CAF50",i.style.fontWeight="bold")),_()}function Tt(e="log-modal"){_();const t=document.getElementById(e);t&&(t.style.display="flex")}function Et(e="log-modal"){const t=document.getElementById(e);t&&(t.style.display="none")}async function wt(e="log-content",t,o){const n=document.getElementById(e);if(!n)return!1;const i=n.innerText;try{return await navigator.clipboard.writeText(i),t?.(),!0}catch{const s=document.createElement("textarea");s.value=i,s.style.position="fixed",s.style.opacity="0",document.body.appendChild(s),s.select();try{return document.execCommand("copy"),t?.(),document.body.removeChild(s),!0}catch{return o?.(),document.body.removeChild(s),!1}}}function Ft(){u.playerLog=[],u.technicalLog=[]}function Lt(e,t){u.playerLog=e.map(o=>({timestamp:"",level:"INFO",message:o})),u.technicalLog=t.map(o=>({timestamp:"",level:"INFO",message:o}))}function bt(){return{...u}}const Bt=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_TOAST_DURATION:E,MAX_PLAYER_LOG_ENTRIES:D,MAX_TECHNICAL_LOG_ENTRIES:R,NEED_COLORS:m,ToastManager:qe,VIEW_MODES:Ye,addPlayerEntry:mt,addTechnicalEntry:w,clearLogs:Ft,copyLogToClipboard:wt,generateStatsHTML:st,getCurrentLogView:At,getLogEntries:vt,getLogState:bt,getPlayerLog:z,getSelectedLevel:xe,getTechnicalLog:K,hideAllMenus:G,hideLogModal:Et,hideMenu:P,hideModal:it,hideToast:V,initLogCapture:pt,initToast:Ge,isMenuOpen:Qe,restoreConsole:yt,setCityMode:gt,setCurrentLogView:X,setLogs:Lt,setSelectedLevel:Je,setWanderMode:ht,showError:ze,showLogModal:Tt,showMenu:Y,showModal:nt,showSuccess:Ke,showToast:B,showWarning:Xe,switchLogView:Ct,toggleMenu:Ze,uiFormatNumber:h,uiUpdateThirst:dt,updateCardSelection:et,updateElement:g,updateLogDisplay:_,updateNeedsPanel:ft,updatePopulation:rt,updateResources:lt,updateWaterDisplay:at,updateWellsDisplay:ct},Symbol.toStringTag,{value:"Module"}));export{Rt as R,Bt as U,_e as a,Fe as c,Ge as i,Oe as p,Ne as r,B as s};
//# sourceMappingURL=game-rendering-BJK6da9S.js.map
