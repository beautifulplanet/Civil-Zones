{"version":3,"file":"game-core-DTqyYw7Y.js","sources":["../../src/config/constants.ts","../../src/config/buildings/residential.ts","../../src/config/buildings/commercial.ts","../../src/config/buildings/industrial.ts","../../src/config/buildings/special.ts","../../src/config/building-db.ts","../../src/core/noise.ts","../../src/core/utils.ts","../../src/core/terrain.ts","../../src/core/spatial.ts"],"sourcesContent":["/**\r\n * Civil Zones - Game Constants\r\n * Core configuration values for the game engine\r\n */\r\n\r\nimport type { \r\n    InventoryConfig, \r\n    VisualStatesConfig, \r\n    MapConfig,\r\n    CivilizationLevel \r\n} from '../types/index.js';\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// MAP & RENDERING\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nexport const MAP_CONFIG: MapConfig = {\r\n    TILE: 48,    // Tile size in pixels\r\n    W: 250,      // Map width in tiles\r\n    H: 250       // Map height in tiles\r\n};\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// INVENTORY SYSTEM\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nexport const INVENTORY: InventoryConfig = {\r\n    BACKPACK_BASE: 150,         // Starting backpack capacity\r\n    BACKPACK_PER_POP: 100,      // Additional capacity per population\r\n    SACK_CAPACITY: 1000,        // Fixed rare item storage (Stone & Metal)\r\n    OVERFLOW_DELETE: true       // Overflow items are deleted instantly\r\n};\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// VISUAL STATES\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nexport const VISUAL_STATES: VisualStatesConfig = {\r\n    ABANDONED_YEARS: 10,        // Years at 0 occupancy before abandoned\r\n    LIGHT_MAX: 0.30,            // 1-30% occupancy\r\n    MEDIUM_MAX: 0.80,           // 31-80% occupancy\r\n    EXTREME_MIN: 0.81           // 81-100% occupancy\r\n};\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// BULLDOZE & CONSTRUCTION\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nexport const BULLDOZE_REFUND = 0.10;  // 10% of construction cost returned\r\nexport const ZONE_COST = 50;\r\nexport const CHIEF_COST = 10000;\r\nexport const CHIEF_RADIUS = 50;\r\nexport const CHIEF_BONUS = 2.0;\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// GROWTH & DECAY\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nexport const GROWTH_THRESHOLD = 1.0;\r\nexport const DECAY_THRESHOLD = 0.7;\r\n\r\nexport const EFFICIENCY = {\r\n    NO_ROAD_PENALTY: 0.05,\r\n    WATER_BONUS_MAX: 0.5,\r\n    FOREST_BONUS: 0.2,\r\n    DECAY_RATE: 0.02,\r\n    MIN_EFFICIENCY: 0.1\r\n} as const;\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// DESIRABILITY SYSTEM\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nexport const DESIRABILITY = {\r\n    NEIGHBOR_BONUS: 0.10,\r\n    TREE_BONUS: 0.25,\r\n    WATER_BONUS: 0.50,\r\n    WATER_RANGE: 5,\r\n    ISOLATION_PENALTY: 0.50,\r\n    ISOLATION_RANGE: 2,\r\n    WEALTH_FOOD_MULTIPLIER: 1.2,\r\n    PATH_BONUS: 0.10,\r\n    WELL_BONUS: 0.15,\r\n    INDUSTRIAL_BONUS: 0.15\r\n} as const;\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// ZONE BONUSES (SimCity SNES Style)\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nexport const ZONE_BONUSES = {\r\n    // Road Access (critical for all zones)\r\n    ROAD_ACCESS_BONUS: 0.50,\r\n    NO_ROAD_PENALTY: 0.30,\r\n    \r\n    // Residential bonuses\r\n    RES_WATER_BONUS: 0.30,\r\n    RES_TREE_BONUS: 0.20,\r\n    RES_CLUSTER_BONUS: 0.10,\r\n    RES_INDUSTRIAL_PENALTY: 0.25,\r\n    RES_WELL_BONUS: 0.15,\r\n    \r\n    // Commercial bonuses\r\n    COM_RES_NEARBY_BONUS: 0.40,\r\n    COM_ROAD_JUNCTION_BONUS: 0.20,\r\n    COM_INDUSTRIAL_NEARBY: 0.15\r\n} as const;\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// GOLD SYSTEM\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nexport const GOLD_EXCHANGE_RATE = 5000;  // 5000 metal = 1 gold\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// CIVILIZATION ERAS\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nexport const ERAS: readonly CivilizationLevel[] = [\r\n    { level: 0, name: 'Wanderer', popRequired: 0, description: 'Nomadic existence' },\r\n    { level: 1, name: 'Settlement', popRequired: 2, description: 'First permanent homes' },\r\n    { level: 2, name: 'Village', popRequired: 20, description: 'Small community forms' },\r\n    { level: 3, name: 'Town', popRequired: 100, description: 'Organized society' },\r\n    { level: 4, name: 'City', popRequired: 500, description: 'Urban development begins' },\r\n    { level: 5, name: 'Metro', popRequired: 2000, description: 'Metropolitan expansion' },\r\n    { level: 6, name: 'Province', popRequired: 7000, description: 'Regional power' },\r\n    { level: 7, name: 'Region', popRequired: 20000, description: 'Multi-city governance' },\r\n    { level: 8, name: 'State', popRequired: 60000, description: 'Organized state' },\r\n    { level: 9, name: 'Nation', popRequired: 180000, description: 'National identity' },\r\n    { level: 10, name: 'Empire', popRequired: 500000, description: 'Imperial expansion' },\r\n    { level: 11, name: 'Dominion', popRequired: 1400000, description: 'Continental power' },\r\n    { level: 12, name: 'Realm', popRequired: 4200000, description: 'Vast territories' },\r\n    { level: 13, name: 'Dynasty', popRequired: 13000000, description: 'Generational rule' },\r\n    { level: 14, name: 'Hegemony', popRequired: 38000000, description: 'Regional dominance' },\r\n    { level: 15, name: 'Superpower', popRequired: 115000000, description: 'Global influence' },\r\n    { level: 16, name: 'World Power', popRequired: 345000000, description: 'World leadership' },\r\n    { level: 17, name: 'Hyperpower', popRequired: 1000000000, description: 'Unmatched might' },\r\n    { level: 18, name: 'Civilization', popRequired: 3100000000, description: 'Peak civilization' },\r\n    { level: 19, name: 'Eternal', popRequired: 10000000000, description: 'Immortal legacy' }\r\n] as const;\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// BUILDING CATEGORY GROUPINGS\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nexport const BUILDING_CATEGORIES = {\r\n    RESIDENTIAL: ['RES_1', 'RES_2', 'RES_3', 'RES_4', 'RES_5', 'RES_6'],\r\n    INDUSTRIAL: ['IND_1', 'IND_2', 'IND_3', 'IND_4', 'IND_5', 'IND_6'],\r\n    COMMERCIAL: ['COM_1', 'COM_2', 'COM_3', 'COM_4', 'COM_5', 'COM_6'],\r\n    INFRASTRUCTURE: ['WELL'],\r\n    MILESTONE: ['CLAN_CHIEF', 'DOCK'],\r\n    SPECIAL: ['CHIEF']\r\n} as const;\r\n","/**\r\n * Civil Zones - Residential Building Definitions\r\n * Pre-Fire Age Theme: First people who discovered fire\r\n * 6 Levels with 4 Density States each\r\n */\r\n\r\nimport type { ResidentialBuildingDefinition } from '../../types/index.js';\r\n\r\nexport const RESIDENTIAL_BUILDINGS: Record<string, ResidentialBuildingDefinition> = {\r\n    'RES_1': {\r\n        id: 'RES_1',\r\n        category: 'RESIDENTIAL',\r\n        level: 1,\r\n        name: 'Tree Shelter',\r\n        cost: { food: 100, wood: 100, stone: 0, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 15,\r\n        overflowCapacity: 20,\r\n        upkeep: { wood: 1, food: 1 },\r\n        baseIncome: 1,\r\n        baseLifespan: 20,\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Abandoned Nest', icon: 'ğŸª¹', incomeClass: 'NONE', lifespanBonus: 0 },\r\n            { min: 1, max: 5, name: 'Small Nest', icon: 'ğŸªº', incomeClass: 'LOW', incomeMult: 0.5, lifespanBonus: 0 },\r\n            { min: 6, max: 10, name: 'Tree Platform', icon: 'ğŸŒ³', incomeClass: 'MEDIUM', incomeMult: 1.0, lifespanBonus: 1 },\r\n            { min: 11, max: 15, name: 'Sturdy Treehouse', icon: 'ğŸ•ï¸', incomeClass: 'HIGH', incomeMult: 1.5, lifespanBonus: 2 }\r\n        ],\r\n        benefits: [\r\n            { type: 'HOUSING', value: 15 },\r\n            { type: 'GATHER_BONUS', resource: 'wood', value: 2 },\r\n            { type: 'GATHER_BONUS', resource: 'food', value: 2 }\r\n        ],\r\n        variants: [\r\n            { name: 'Abandoned Nest', icon: 'ğŸª¹', bonusMult: 0 },\r\n            { name: 'Small Nest', icon: 'ğŸªº', bonusMult: 0.5 },\r\n            { name: 'Tree Platform', icon: 'ğŸŒ³', bonusMult: 1.0 },\r\n            { name: 'Sturdy Treehouse', icon: 'ğŸ•ï¸', bonusMult: 1.5 }\r\n        ],\r\n        unlockReq: { pop: 0 }\r\n    },\r\n\r\n    'RES_2': {\r\n        id: 'RES_2',\r\n        category: 'RESIDENTIAL',\r\n        level: 2,\r\n        name: 'Ground Pit',\r\n        cost: { food: 300, wood: 300, stone: 50, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 25,\r\n        overflowCapacity: 30,\r\n        upkeep: { wood: 2, food: 2 },\r\n        baseIncome: 3,\r\n        baseLifespan: 20,\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Collapsed Pit', icon: 'ğŸ•³ï¸', incomeClass: 'NONE', lifespanBonus: 0 },\r\n            { min: 1, max: 8, name: 'Shallow Scrape', icon: 'â¬›', incomeClass: 'LOW', incomeMult: 0.5, lifespanBonus: 0 },\r\n            { min: 9, max: 17, name: 'Dug Pit', icon: 'ğŸŸ«', incomeClass: 'MEDIUM', incomeMult: 1.0, lifespanBonus: 1 },\r\n            { min: 18, max: 25, name: 'Covered Pit Dwelling', icon: 'ğŸ ', incomeClass: 'HIGH', incomeMult: 1.5, lifespanBonus: 2 }\r\n        ],\r\n        benefits: [\r\n            { type: 'HOUSING', value: 25 },\r\n            { type: 'GATHER_BONUS', resource: 'wood', value: 5 },\r\n            { type: 'GATHER_BONUS', resource: 'food', value: 5 },\r\n            { type: 'GATHER_BONUS', resource: 'stone', value: 1 }\r\n        ],\r\n        variants: [\r\n            { name: 'Collapsed Pit', icon: 'ğŸ•³ï¸', bonusMult: 0 },\r\n            { name: 'Shallow Scrape', icon: 'â¬›', bonusMult: 0.5 },\r\n            { name: 'Dug Pit', icon: 'ğŸŸ«', bonusMult: 1.0 },\r\n            { name: 'Covered Pit Dwelling', icon: 'ğŸ ', bonusMult: 1.5 }\r\n        ],\r\n        unlockReq: { pop: 50 }\r\n    },\r\n\r\n    'RES_3': {\r\n        id: 'RES_3',\r\n        category: 'RESIDENTIAL',\r\n        level: 3,\r\n        name: 'Ground Cave',\r\n        cost: { food: 900, wood: 900, stone: 200, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 60,\r\n        overflowCapacity: 65,\r\n        upkeep: { wood: 3, food: 3 },\r\n        baseIncome: 8,\r\n        baseLifespan: 20,\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Collapsed Cave', icon: 'ğŸª¨', incomeClass: 'NONE', lifespanBonus: 0 },\r\n            { min: 1, max: 20, name: 'Small Cave', icon: 'ğŸ•³ï¸', incomeClass: 'LOW', incomeMult: 0.5, lifespanBonus: 0 },\r\n            { min: 21, max: 40, name: 'Deep Cave', icon: 'â›°ï¸', incomeClass: 'MEDIUM', incomeMult: 1.0, lifespanBonus: 1 },\r\n            { min: 41, max: 60, name: 'Cave Complex', icon: 'ğŸ”ï¸', incomeClass: 'HIGH', incomeMult: 1.5, lifespanBonus: 2 }\r\n        ],\r\n        benefits: [\r\n            { type: 'HOUSING', value: 60 },\r\n            { type: 'GATHER_BONUS', resource: 'wood', value: 12 },\r\n            { type: 'GATHER_BONUS', resource: 'food', value: 12 },\r\n            { type: 'GATHER_BONUS', resource: 'stone', value: 3 },\r\n            { type: 'GATHER_BONUS', resource: 'metal', value: 1 }\r\n        ],\r\n        variants: [\r\n            { name: 'Collapsed Cave', icon: 'ğŸª¨', bonusMult: 0 },\r\n            { name: 'Small Cave', icon: 'ğŸ•³ï¸', bonusMult: 0.5 },\r\n            { name: 'Deep Cave', icon: 'â›°ï¸', bonusMult: 1.0 },\r\n            { name: 'Cave Complex', icon: 'ğŸ”ï¸', bonusMult: 1.5 }\r\n        ],\r\n        unlockReq: {\r\n            pop: 200,\r\n            buildings: { type: 'COM', level: 1, count: 2 }\r\n        }\r\n    },\r\n\r\n    // Post-Clan Chief Era: Native American themed buildings\r\n    'RES_4': {\r\n        id: 'RES_4',\r\n        category: 'RESIDENTIAL',\r\n        level: 4,\r\n        name: 'Tipi Village',\r\n        cost: { food: 2000, wood: 2000, stone: 40, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 50,\r\n        overflowCapacity: 55,\r\n        upkeep: { wood: 4, food: 4 },\r\n        baseIncome: 16,\r\n        baseLifespan: 25,\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Abandoned Tipis', icon: 'â›º', incomeClass: 'NONE', lifespanBonus: 0 },\r\n            { min: 1, max: 16, name: 'Small Camp', icon: 'â›º', incomeClass: 'LOW', incomeMult: 0.5, lifespanBonus: 0 },\r\n            { min: 17, max: 33, name: 'Tipi Circle', icon: 'ğŸ•ï¸', incomeClass: 'MEDIUM', incomeMult: 1.0, lifespanBonus: 2 },\r\n            { min: 34, max: 50, name: 'Tipi Village', icon: 'ğŸª', incomeClass: 'HIGH', incomeMult: 1.5, lifespanBonus: 4 }\r\n        ],\r\n        benefits: [\r\n            { type: 'HOUSING', value: 50 },\r\n            { type: 'GATHER_BONUS', resource: 'wood', value: 20 },\r\n            { type: 'GATHER_BONUS', resource: 'food', value: 20 },\r\n            { type: 'GATHER_BONUS', resource: 'stone', value: 5 }\r\n        ],\r\n        variants: [\r\n            { name: 'Abandoned Tipis', icon: 'â›º', bonusMult: 0 },\r\n            { name: 'Small Camp', icon: 'â›º', bonusMult: 0.5 },\r\n            { name: 'Tipi Circle', icon: 'ğŸ•ï¸', bonusMult: 1.0 },\r\n            { name: 'Tipi Village', icon: 'ğŸª', bonusMult: 1.5 }\r\n        ],\r\n        unlockReq: {\r\n            buildings: { id: 'CLAN_CHIEF', count: 1 }\r\n        },\r\n        popUnlock: 500\r\n    },\r\n\r\n    'RES_5': {\r\n        id: 'RES_5',\r\n        category: 'RESIDENTIAL',\r\n        level: 5,\r\n        name: 'Log Longhouse',\r\n        cost: { food: 8000, wood: 8000, stone: 80, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 120,\r\n        overflowCapacity: 130,\r\n        upkeep: { wood: 6, food: 6 },\r\n        baseIncome: 32,\r\n        baseLifespan: 30,\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Ruined Longhouse', icon: 'ğŸšï¸', incomeClass: 'NONE', lifespanBonus: 0 },\r\n            { min: 1, max: 40, name: 'Small Longhouse', icon: 'ğŸ ', incomeClass: 'LOW', incomeMult: 0.5, lifespanBonus: 0 },\r\n            { min: 41, max: 80, name: 'Family Longhouse', icon: 'ğŸ¡', incomeClass: 'MEDIUM', incomeMult: 1.0, lifespanBonus: 3 },\r\n            { min: 81, max: 120, name: 'Clan Longhouse', icon: 'ğŸ˜ï¸', incomeClass: 'HIGH', incomeMult: 1.5, lifespanBonus: 5 }\r\n        ],\r\n        benefits: [\r\n            { type: 'HOUSING', value: 120 },\r\n            { type: 'GATHER_BONUS', resource: 'wood', value: 40 },\r\n            { type: 'GATHER_BONUS', resource: 'food', value: 40 },\r\n            { type: 'GATHER_BONUS', resource: 'stone', value: 10 },\r\n            { type: 'GATHER_BONUS', resource: 'metal', value: 3 }\r\n        ],\r\n        variants: [\r\n            { name: 'Ruined Longhouse', icon: 'ğŸšï¸', bonusMult: 0 },\r\n            { name: 'Small Longhouse', icon: 'ğŸ ', bonusMult: 0.5 },\r\n            { name: 'Family Longhouse', icon: 'ğŸ¡', bonusMult: 1.0 },\r\n            { name: 'Clan Longhouse', icon: 'ğŸ˜ï¸', bonusMult: 1.5 }\r\n        ],\r\n        unlockReq: {\r\n            buildings: { id: 'CLAN_CHIEF', count: 1 }\r\n        },\r\n        popUnlock: 1000\r\n    },\r\n\r\n    'RES_6': {\r\n        id: 'RES_6',\r\n        category: 'RESIDENTIAL',\r\n        level: 6,\r\n        name: 'Old Growth Log Compound',\r\n        cost: { food: 20000, wood: 20000, stone: 100, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 240,\r\n        overflowCapacity: 260,\r\n        upkeep: { wood: 10, food: 10 },\r\n        baseIncome: 64,\r\n        baseLifespan: 35,\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Abandoned Compound', icon: 'ğŸšï¸', incomeClass: 'NONE', lifespanBonus: 0 },\r\n            { min: 1, max: 80, name: 'Small Compound', icon: 'ğŸ˜ï¸', incomeClass: 'LOW', incomeMult: 0.5, lifespanBonus: 0 },\r\n            { min: 81, max: 160, name: 'Growing Compound', icon: 'ğŸ°', incomeClass: 'MEDIUM', incomeMult: 1.0, lifespanBonus: 4 },\r\n            { min: 161, max: 240, name: 'Grand Log Compound', icon: 'ğŸ¯', incomeClass: 'HIGH', incomeMult: 1.5, lifespanBonus: 7 }\r\n        ],\r\n        benefits: [\r\n            { type: 'HOUSING', value: 240 },\r\n            { type: 'GATHER_BONUS', resource: 'wood', value: 80 },\r\n            { type: 'GATHER_BONUS', resource: 'food', value: 80 },\r\n            { type: 'GATHER_BONUS', resource: 'stone', value: 20 },\r\n            { type: 'GATHER_BONUS', resource: 'metal', value: 6 }\r\n        ],\r\n        variants: [\r\n            { name: 'Abandoned Compound', icon: 'ğŸšï¸', bonusMult: 0 },\r\n            { name: 'Small Compound', icon: 'ğŸ˜ï¸', bonusMult: 0.5 },\r\n            { name: 'Growing Compound', icon: 'ğŸ°', bonusMult: 1.0 },\r\n            { name: 'Grand Log Compound', icon: 'ğŸ¯', bonusMult: 1.5 }\r\n        ],\r\n        unlockReq: {\r\n            buildings: { id: 'CLAN_CHIEF', count: 1 }\r\n        },\r\n        popUnlock: 2000\r\n    }\r\n};\r\n","/**\r\n * Civil Zones - Commercial Building Definitions\r\n * Pre-Fire Age Theme: Trading and Exchange\r\n * 6 Levels with 4 Activity States each\r\n */\r\n\r\nimport type { CommercialBuildingDefinition } from '../../types/index.js';\r\n\r\nexport const COMMERCIAL_BUILDINGS: Record<string, CommercialBuildingDefinition> = {\r\n    'COM_1': {\r\n        id: 'COM_1',\r\n        category: 'COMMERCIAL',\r\n        level: 1,\r\n        name: 'Pebble Trade Fire',\r\n        cost: { food: 150, wood: 150, stone: 0, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 8,\r\n        baseIncome: 5,\r\n        upkeep: { wood: 1, food: 0 },\r\n        benefits: [\r\n            { type: 'JOBS', value: 8 },\r\n            { type: 'INCOME', value: 5 },\r\n            { type: 'DESIRABILITY', radius: 4, value: 0.2 }\r\n        ],\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Cold Embers', icon: 'â¬›', incomeMult: 0 },\r\n            { min: 0.01, max: 0.3, name: 'Pebble Trade Fire', icon: 'ğŸ”¥', incomeMult: 0.5 },\r\n            { min: 0.31, max: 0.7, name: 'Pebble Trade Fire', icon: 'ğŸ”¥', incomeMult: 1.0 },\r\n            { min: 0.71, max: 1.0, name: 'Busy Trade Fire', icon: 'ğŸ”¥', incomeMult: 1.5 }\r\n        ],\r\n        variants: [\r\n            { name: 'Cold Embers', icon: 'â¬›', bonusMult: 0 },\r\n            { name: 'Pebble Trade Fire', icon: 'ğŸ”¥', bonusMult: 0.5 },\r\n            { name: 'Pebble Trade Fire', icon: 'ğŸ”¥', bonusMult: 1.0 },\r\n            { name: 'Busy Trade Fire', icon: 'ğŸ”¥', bonusMult: 1.5 }\r\n        ],\r\n        popUnlock: 10\r\n    },\r\n\r\n    'COM_2': {\r\n        id: 'COM_2',\r\n        category: 'COMMERCIAL',\r\n        level: 2,\r\n        name: 'Squirrel Trade Camp',\r\n        cost: { food: 400, wood: 400, stone: 50, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 20,\r\n        baseIncome: 15,\r\n        upkeep: { wood: 2, food: 0 },\r\n        benefits: [\r\n            { type: 'JOBS', value: 20 },\r\n            { type: 'INCOME', value: 15 },\r\n            { type: 'DESIRABILITY', radius: 5, value: 0.3 }\r\n        ],\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Empty Camp', icon: 'ğŸ•ï¸', incomeMult: 0 },\r\n            { min: 0.01, max: 0.3, name: 'Squirrel Trade Camp', icon: 'ğŸ¿ï¸', incomeMult: 0.5 },\r\n            { min: 0.31, max: 0.7, name: 'Squirrel Trade Camp', icon: 'ğŸ¿ï¸', incomeMult: 1.0 },\r\n            { min: 0.71, max: 1.0, name: 'Busy Fur Camp', icon: 'ğŸ¿ï¸', incomeMult: 1.5 }\r\n        ],\r\n        variants: [\r\n            { name: 'Empty Camp', icon: 'ğŸ•ï¸', bonusMult: 0 },\r\n            { name: 'Squirrel Trade Camp', icon: 'ğŸ¿ï¸', bonusMult: 0.5 },\r\n            { name: 'Squirrel Trade Camp', icon: 'ğŸ¿ï¸', bonusMult: 1.0 },\r\n            { name: 'Busy Fur Camp', icon: 'ğŸ¿ï¸', bonusMult: 1.5 }\r\n        ],\r\n        popUnlock: 40\r\n    },\r\n\r\n    'COM_3': {\r\n        id: 'COM_3',\r\n        category: 'COMMERCIAL',\r\n        level: 3,\r\n        name: 'Fire Meet Camp',\r\n        cost: { food: 1200, wood: 1200, stone: 200, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 50,\r\n        baseIncome: 40,\r\n        upkeep: { wood: 3, food: 0 },\r\n        benefits: [\r\n            { type: 'JOBS', value: 50 },\r\n            { type: 'INCOME', value: 40 },\r\n            { type: 'DESIRABILITY', radius: 6, value: 0.4 },\r\n            { type: 'CULTURE', value: 5 }\r\n        ],\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Cold Meeting Ground', icon: 'â­•', incomeMult: 0 },\r\n            { min: 0.01, max: 0.3, name: 'Fire Meet Camp', icon: 'ğŸ•ï¸', incomeMult: 0.5 },\r\n            { min: 0.31, max: 0.7, name: 'Fire Meet Camp', icon: 'ğŸ”¥', incomeMult: 1.0 },\r\n            { min: 0.71, max: 1.0, name: 'Great Fire Gathering', icon: 'ğŸ†', incomeMult: 1.5 }\r\n        ],\r\n        variants: [\r\n            { name: 'Cold Meeting Ground', icon: 'â­•', bonusMult: 0 },\r\n            { name: 'Fire Meet Camp', icon: 'ğŸ•ï¸', bonusMult: 0.5 },\r\n            { name: 'Fire Meet Camp', icon: 'ğŸ”¥', bonusMult: 1.0 },\r\n            { name: 'Great Fire Gathering', icon: 'ğŸ†', bonusMult: 1.5 }\r\n        ],\r\n        popUnlock: 150\r\n    },\r\n\r\n    // Post-Clan Chief Era: Advanced trading and marketplaces\r\n    'COM_4': {\r\n        id: 'COM_4',\r\n        category: 'COMMERCIAL',\r\n        level: 4,\r\n        name: 'Barter Barrel',\r\n        cost: { food: 1600, wood: 1600, stone: 32, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 16,\r\n        baseIncome: 80,\r\n        upkeep: { wood: 4, food: 0 },\r\n        benefits: [\r\n            { type: 'JOBS', value: 16 },\r\n            { type: 'INCOME', value: 80 },\r\n            { type: 'DESIRABILITY', radius: 5, value: 0.35 }\r\n        ],\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Empty Barrel', icon: 'ğŸª£', incomeMult: 0 },\r\n            { min: 0.01, max: 0.3, name: 'Sparse Goods', icon: 'ğŸª£', incomeMult: 0.5 },\r\n            { min: 0.31, max: 0.7, name: 'Barter Barrel', icon: 'ğŸ›¢ï¸', incomeMult: 1.0 },\r\n            { min: 0.71, max: 1.0, name: 'Bustling Trade Post', icon: 'ğŸ’°', incomeMult: 1.5 }\r\n        ],\r\n        variants: [\r\n            { name: 'Empty Barrel', icon: 'ğŸª£', bonusMult: 0 },\r\n            { name: 'Sparse Goods', icon: 'ğŸª£', bonusMult: 0.5 },\r\n            { name: 'Barter Barrel', icon: 'ğŸ›¢ï¸', bonusMult: 1.0 },\r\n            { name: 'Bustling Trade Post', icon: 'ğŸ’°', bonusMult: 1.5 }\r\n        ],\r\n        unlockReq: {\r\n            buildings: { id: 'CLAN_CHIEF', count: 1 }\r\n        },\r\n        popUnlock: 500\r\n    },\r\n\r\n    'COM_5': {\r\n        id: 'COM_5',\r\n        category: 'COMMERCIAL',\r\n        level: 5,\r\n        name: 'Blanket Market',\r\n        cost: { food: 6400, wood: 6400, stone: 64, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 40,\r\n        baseIncome: 160,\r\n        upkeep: { wood: 6, food: 0 },\r\n        benefits: [\r\n            { type: 'JOBS', value: 40 },\r\n            { type: 'INCOME', value: 160 },\r\n            { type: 'DESIRABILITY', radius: 6, value: 0.45 },\r\n            { type: 'CULTURE', value: 8 }\r\n        ],\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Empty Market', icon: 'ğŸ§º', incomeMult: 0 },\r\n            { min: 0.01, max: 0.3, name: 'Few Blankets', icon: 'ğŸ§º', incomeMult: 0.5 },\r\n            { min: 0.31, max: 0.7, name: 'Blanket Market', icon: 'ğŸ›ï¸', incomeMult: 1.0 },\r\n            { min: 0.71, max: 1.0, name: 'Grand Market Fair', icon: 'ğŸª', incomeMult: 1.5 }\r\n        ],\r\n        variants: [\r\n            { name: 'Empty Market', icon: 'ğŸ§º', bonusMult: 0 },\r\n            { name: 'Few Blankets', icon: 'ğŸ§º', bonusMult: 0.5 },\r\n            { name: 'Blanket Market', icon: 'ğŸ›ï¸', bonusMult: 1.0 },\r\n            { name: 'Grand Market Fair', icon: 'ğŸª', bonusMult: 1.5 }\r\n        ],\r\n        unlockReq: {\r\n            buildings: { id: 'CLAN_CHIEF', count: 1 }\r\n        },\r\n        popUnlock: 1000\r\n    },\r\n\r\n    'COM_6': {\r\n        id: 'COM_6',\r\n        category: 'COMMERCIAL',\r\n        level: 6,\r\n        name: 'Bear Market',\r\n        cost: { food: 16000, wood: 16000, stone: 80, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 100,\r\n        baseIncome: 320,\r\n        upkeep: { wood: 10, food: 0 },\r\n        benefits: [\r\n            { type: 'JOBS', value: 100 },\r\n            { type: 'INCOME', value: 320 },\r\n            { type: 'DESIRABILITY', radius: 7, value: 0.55 },\r\n            { type: 'CULTURE', value: 15 }\r\n        ],\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Abandoned Market', icon: 'ğŸ»', incomeMult: 0 },\r\n            { min: 0.01, max: 0.3, name: 'Quiet Trading', icon: 'ğŸ»', incomeMult: 0.5 },\r\n            { min: 0.31, max: 0.7, name: 'Bear Market', icon: 'ğŸª', incomeMult: 1.0 },\r\n            { min: 0.71, max: 1.0, name: 'Great Bear Exchange', icon: 'ğŸ›ï¸', incomeMult: 1.5 }\r\n        ],\r\n        variants: [\r\n            { name: 'Abandoned Market', icon: 'ğŸ»', bonusMult: 0 },\r\n            { name: 'Quiet Trading', icon: 'ğŸ»', bonusMult: 0.5 },\r\n            { name: 'Bear Market', icon: 'ğŸª', bonusMult: 1.0 },\r\n            { name: 'Great Bear Exchange', icon: 'ğŸ›ï¸', bonusMult: 1.5 }\r\n        ],\r\n        unlockReq: {\r\n            buildings: { id: 'CLAN_CHIEF', count: 1 }\r\n        },\r\n        popUnlock: 2000\r\n    }\r\n};\r\n","/**\r\n * Civil Zones - Industrial Building Definitions\r\n * Pre-Fire Age Theme: Hunting, Gathering, and Production\r\n * 6 Levels with 4 Activity States each\r\n */\r\n\r\nimport type { IndustrialBuildingDefinition } from '../../types/index.js';\r\n\r\nexport const INDUSTRIAL_BUILDINGS: Record<string, IndustrialBuildingDefinition> = {\r\n    'IND_1': {\r\n        id: 'IND_1',\r\n        category: 'INDUSTRIAL',\r\n        level: 1,\r\n        name: 'Bird Hunting Range',\r\n        cost: { food: 200, wood: 200, stone: 0, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 10,\r\n        baseProduction: 10,\r\n        upkeep: { wood: 1, food: 1 },\r\n        benefits: [\r\n            { type: 'JOBS', value: 10 },\r\n            { type: 'GATHER_BONUS', resource: 'food', value: 5 },\r\n            { type: 'DESIRABILITY', radius: 3, value: 0.1 }\r\n        ],\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Empty Range', icon: 'ğŸª¶', productionMult: 0 },\r\n            { min: 0.01, max: 0.3, name: 'Sparse Hunting Path', icon: 'ğŸª¶', productionMult: 0.5 },\r\n            { min: 0.31, max: 0.7, name: 'Bird Hunting Range', icon: 'ğŸ¦…', productionMult: 1.0 },\r\n            { min: 0.71, max: 1.0, name: 'Prime Fowling Grounds', icon: 'ğŸ¯', productionMult: 1.5 }\r\n        ],\r\n        variants: [\r\n            { name: 'Empty Range', icon: 'ğŸª¶', bonusMult: 0 },\r\n            { name: 'Sparse Hunting Path', icon: 'ğŸª¶', bonusMult: 0.5 },\r\n            { name: 'Bird Hunting Range', icon: 'ğŸ¦…', bonusMult: 1.0 },\r\n            { name: 'Prime Fowling Grounds', icon: 'ğŸ¯', bonusMult: 1.5 }\r\n        ],\r\n        popUnlock: 2\r\n    },\r\n\r\n    'IND_2': {\r\n        id: 'IND_2',\r\n        category: 'INDUSTRIAL',\r\n        level: 2,\r\n        name: 'Grub Digging Pit',\r\n        cost: { food: 500, wood: 500, stone: 100, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 25,\r\n        baseProduction: 25,\r\n        upkeep: { wood: 2, food: 1 },\r\n        benefits: [\r\n            { type: 'JOBS', value: 25 },\r\n            { type: 'GATHER_BONUS', resource: 'food', value: 10 },\r\n            { type: 'GATHER_BONUS', resource: 'stone', value: 2 },\r\n            { type: 'DESIRABILITY', radius: 3, value: 0.1 }\r\n        ],\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Filled Hole', icon: 'ğŸ•³ï¸', productionMult: 0 },\r\n            { min: 0.01, max: 0.3, name: 'Scratched Earth', icon: 'ğŸ•³ï¸', productionMult: 0.5 },\r\n            { min: 0.31, max: 0.7, name: 'Grub Digging Pit', icon: 'ğŸª±', productionMult: 1.0 },\r\n            { min: 0.71, max: 1.0, name: 'Bountiful Foraging Pit', icon: 'ğŸ–', productionMult: 1.5 }\r\n        ],\r\n        variants: [\r\n            { name: 'Filled Hole', icon: 'ğŸ•³ï¸', bonusMult: 0 },\r\n            { name: 'Scratched Earth', icon: 'ğŸ•³ï¸', bonusMult: 0.5 },\r\n            { name: 'Grub Digging Pit', icon: 'ğŸª±', bonusMult: 1.0 },\r\n            { name: 'Bountiful Foraging Pit', icon: 'ğŸ–', bonusMult: 1.5 }\r\n        ],\r\n        popUnlock: 50\r\n    },\r\n\r\n    'IND_3': {\r\n        id: 'IND_3',\r\n        category: 'INDUSTRIAL',\r\n        level: 3,\r\n        name: 'Stone Knapping Site',\r\n        cost: { food: 1500, wood: 1500, stone: 500, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 60,\r\n        baseProduction: 60,\r\n        upkeep: { wood: 3, food: 1 },\r\n        benefits: [\r\n            { type: 'JOBS', value: 60 },\r\n            { type: 'GATHER_BONUS', resource: 'food', value: 15 },\r\n            { type: 'GATHER_BONUS', resource: 'stone', value: 10 },\r\n            { type: 'GATHER_BONUS', resource: 'metal', value: 3 },\r\n            { type: 'DESIRABILITY', radius: 4, value: 0.15 }\r\n        ],\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Abandoned Site', icon: 'ğŸª¨', productionMult: 0 },\r\n            { min: 0.01, max: 0.3, name: 'Scattered Flakes', icon: 'ğŸª¨', productionMult: 0.5 },\r\n            { min: 0.31, max: 0.7, name: 'Stone Knapping Site', icon: 'âš’ï¸', productionMult: 1.0 },\r\n            { min: 0.71, max: 1.0, name: 'Master Flint Workshop', icon: 'ğŸ”¨', productionMult: 1.5 }\r\n        ],\r\n        variants: [\r\n            { name: 'Abandoned Site', icon: 'ğŸª¨', bonusMult: 0 },\r\n            { name: 'Scattered Flakes', icon: 'ğŸª¨', bonusMult: 0.5 },\r\n            { name: 'Stone Knapping Site', icon: 'âš’ï¸', bonusMult: 1.0 },\r\n            { name: 'Master Flint Workshop', icon: 'ğŸ”¨', bonusMult: 1.5 }\r\n        ],\r\n        popUnlock: 200\r\n    },\r\n\r\n    // Post-Clan Chief Era: Advanced hunting and resource extraction\r\n    'IND_4': {\r\n        id: 'IND_4',\r\n        category: 'INDUSTRIAL',\r\n        level: 4,\r\n        name: 'Turtle Hunting Ground',\r\n        cost: { food: 2400, wood: 2400, stone: 48, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 20,\r\n        baseProduction: 50,\r\n        upkeep: { wood: 4, food: 2 },\r\n        benefits: [\r\n            { type: 'JOBS', value: 20 },\r\n            { type: 'GATHER_BONUS', resource: 'food', value: 30 },\r\n            { type: 'GATHER_BONUS', resource: 'stone', value: 15 },\r\n            { type: 'DESIRABILITY', radius: 4, value: 0.2 }\r\n        ],\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Empty Grounds', icon: 'ğŸ¢', productionMult: 0 },\r\n            { min: 0.01, max: 0.3, name: 'Sparse Hunting', icon: 'ğŸ¢', productionMult: 0.5 },\r\n            { min: 0.31, max: 0.7, name: 'Turtle Hunting Ground', icon: 'ğŸ¯', productionMult: 1.0 },\r\n            { min: 0.71, max: 1.0, name: 'Prime Turtle Territory', icon: 'ğŸ†', productionMult: 1.5 }\r\n        ],\r\n        variants: [\r\n            { name: 'Empty Grounds', icon: 'ğŸ¢', bonusMult: 0 },\r\n            { name: 'Sparse Hunting', icon: 'ğŸ¢', bonusMult: 0.5 },\r\n            { name: 'Turtle Hunting Ground', icon: 'ğŸ¯', bonusMult: 1.0 },\r\n            { name: 'Prime Turtle Territory', icon: 'ğŸ†', bonusMult: 1.5 }\r\n        ],\r\n        unlockReq: {\r\n            buildings: { id: 'CLAN_CHIEF', count: 1 }\r\n        },\r\n        popUnlock: 500\r\n    },\r\n\r\n    'IND_5': {\r\n        id: 'IND_5',\r\n        category: 'INDUSTRIAL',\r\n        level: 5,\r\n        name: 'Bear Pit',\r\n        cost: { food: 9600, wood: 9600, stone: 96, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 50,\r\n        baseProduction: 120,\r\n        upkeep: { wood: 6, food: 3 },\r\n        benefits: [\r\n            { type: 'JOBS', value: 50 },\r\n            { type: 'GATHER_BONUS', resource: 'food', value: 60 },\r\n            { type: 'GATHER_BONUS', resource: 'stone', value: 25 },\r\n            { type: 'GATHER_BONUS', resource: 'metal', value: 8 },\r\n            { type: 'DESIRABILITY', radius: 5, value: 0.25 }\r\n        ],\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Abandoned Pit', icon: 'ğŸ»', productionMult: 0 },\r\n            { min: 0.01, max: 0.3, name: 'Small Bear Trap', icon: 'ğŸ»', productionMult: 0.5 },\r\n            { min: 0.31, max: 0.7, name: 'Bear Pit', icon: 'âš”ï¸', productionMult: 1.0 },\r\n            { min: 0.71, max: 1.0, name: 'Great Bear Hunting Ground', icon: 'ğŸ¹', productionMult: 1.5 }\r\n        ],\r\n        variants: [\r\n            { name: 'Abandoned Pit', icon: 'ğŸ»', bonusMult: 0 },\r\n            { name: 'Small Bear Trap', icon: 'ğŸ»', bonusMult: 0.5 },\r\n            { name: 'Bear Pit', icon: 'âš”ï¸', bonusMult: 1.0 },\r\n            { name: 'Great Bear Hunting Ground', icon: 'ğŸ¹', bonusMult: 1.5 }\r\n        ],\r\n        unlockReq: {\r\n            buildings: { id: 'CLAN_CHIEF', count: 1 }\r\n        },\r\n        popUnlock: 1000\r\n    },\r\n\r\n    'IND_6': {\r\n        id: 'IND_6',\r\n        category: 'INDUSTRIAL',\r\n        level: 6,\r\n        name: 'Buffalo Grounds',\r\n        cost: { food: 24000, wood: 24000, stone: 120, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 120,\r\n        baseProduction: 240,\r\n        upkeep: { wood: 10, food: 5 },\r\n        benefits: [\r\n            { type: 'JOBS', value: 120 },\r\n            { type: 'GATHER_BONUS', resource: 'food', value: 120 },\r\n            { type: 'GATHER_BONUS', resource: 'stone', value: 40 },\r\n            { type: 'GATHER_BONUS', resource: 'metal', value: 15 },\r\n            { type: 'DESIRABILITY', radius: 6, value: 0.3 }\r\n        ],\r\n        stateThresholds: [\r\n            { min: 0, max: 0, name: 'Empty Plains', icon: 'ğŸ¦¬', productionMult: 0 },\r\n            { min: 0.01, max: 0.3, name: 'Sparse Herd Grounds', icon: 'ğŸ¦¬', productionMult: 0.5 },\r\n            { min: 0.31, max: 0.7, name: 'Buffalo Grounds', icon: 'ğŸ¹', productionMult: 1.0 },\r\n            { min: 0.71, max: 1.0, name: 'Great Buffalo Hunt', icon: 'âš¡', productionMult: 1.5 }\r\n        ],\r\n        variants: [\r\n            { name: 'Empty Plains', icon: 'ğŸ¦¬', bonusMult: 0 },\r\n            { name: 'Sparse Herd Grounds', icon: 'ğŸ¦¬', bonusMult: 0.5 },\r\n            { name: 'Buffalo Grounds', icon: 'ğŸ¹', bonusMult: 1.0 },\r\n            { name: 'Great Buffalo Hunt', icon: 'âš¡', bonusMult: 1.5 }\r\n        ],\r\n        unlockReq: {\r\n            buildings: { id: 'CLAN_CHIEF', count: 1 }\r\n        },\r\n        popUnlock: 2000\r\n    }\r\n};\r\n","/**\r\n * Civil Zones - Special & Milestone Building Definitions\r\n * Infrastructure, Milestones, and Unique Buildings\r\n */\r\n\r\nimport type { \r\n    SpecialBuildingDefinition, \r\n    MilestoneBuildingDefinition,\r\n    BuildingDefinition \r\n} from '../../types/index.js';\r\n\r\n// Infrastructure Buildings\r\nexport const INFRASTRUCTURE_BUILDINGS: Record<string, SpecialBuildingDefinition> = {\r\n    'WELL': {\r\n        id: 'WELL',\r\n        category: 'SPECIAL',\r\n        level: 1,\r\n        name: 'Water Well',\r\n        cost: { food: 50, wood: 200, stone: 5, metal: 0 },\r\n        size: { w: 1, h: 1 },\r\n        capacity: 0,\r\n        upkeep: { wood: 0, food: 0 },\r\n        benefits: [\r\n            { type: 'WATER_ACCESS', value: 100 },\r\n            { type: 'DESIRABILITY', radius: 6, value: 0.15 }\r\n        ],\r\n        stateThresholds: [],\r\n        variants: [\r\n            { name: 'Dry Well', icon: 'ğŸ•³ï¸', bonusMult: 0 },\r\n            { name: 'Water Well', icon: 'ğŸ’§', bonusMult: 1.0 }\r\n        ],\r\n        popUnlock: 0\r\n    }\r\n};\r\n\r\n// Milestone Buildings - Major Progression Gates\r\nexport const MILESTONE_BUILDINGS: Record<string, MilestoneBuildingDefinition> = {\r\n    'CLAN_CHIEF': {\r\n        id: 'CLAN_CHIEF',\r\n        category: 'MILESTONE',\r\n        level: 1,\r\n        name: \"Clan Chief's Hut\",\r\n        cost: { food: 100000, wood: 100000, stone: 0, metal: 0 },\r\n        size: { w: 2, h: 2 },\r\n        capacity: 0,\r\n        upkeep: { wood: 5, food: 5 },\r\n        unique: true,\r\n        benefits: [\r\n            { type: 'DESIRABILITY', radius: 50, value: 2.0 },\r\n            { type: 'CULTURE', value: 25 }\r\n        ],\r\n        stateThresholds: [],\r\n        variants: [\r\n            { name: \"Clan Chief's Hut\", icon: 'ğŸ›ï¸', bonusMult: 1.0 }\r\n        ],\r\n        unlockReq: {\r\n            pop: 500,\r\n            resources: { food: 100000, wood: 100000 }\r\n        },\r\n        milestoneBonus: {\r\n            type: 'UNLOCK_TIER',\r\n            value: 4\r\n        }\r\n    },\r\n\r\n    'DOCK': {\r\n        id: 'DOCK',\r\n        category: 'MILESTONE',\r\n        level: 2,\r\n        name: \"First Dock\",\r\n        cost: { food: 500000, wood: 500000, stone: 0, metal: 0 },\r\n        size: { w: 3, h: 2 },\r\n        capacity: 0,\r\n        upkeep: { wood: 15, food: 10 },\r\n        unique: true,\r\n        benefits: [\r\n            { type: 'DESIRABILITY', radius: 60, value: 3.0 },\r\n            { type: 'CULTURE', value: 50 },\r\n            { type: 'INCOME', value: 500 }\r\n        ],\r\n        stateThresholds: [],\r\n        variants: [\r\n            { name: \"First Dock\", icon: 'âš“', bonusMult: 1.0 }\r\n        ],\r\n        unlockReq: {\r\n            pop: 2000,\r\n            buildings: { id: 'CLAN_CHIEF', count: 1 },\r\n            resources: { food: 500000, wood: 500000 }\r\n        },\r\n        milestoneBonus: {\r\n            type: 'UNLOCK_TIER',\r\n            value: 7\r\n        }\r\n    }\r\n};\r\n\r\n// Legacy Special Buildings (backward compatibility)\r\nexport const LEGACY_BUILDINGS: Record<string, SpecialBuildingDefinition> = {\r\n    'CHIEF': {\r\n        id: 'CHIEF',\r\n        category: 'SPECIAL',\r\n        level: 1,\r\n        name: \"First Chief's Hut\",\r\n        cost: { food: 10000, wood: 0, stone: 0, metal: 0 },\r\n        size: { w: 2, h: 2 },\r\n        capacity: 0,\r\n        upkeep: { wood: 0, food: 0 },\r\n        benefits: [\r\n            { type: 'DESIRABILITY', radius: 50, value: 2.0 },\r\n            { type: 'CULTURE', value: 10 }\r\n        ],\r\n        stateThresholds: [],\r\n        variants: [\r\n            { name: \"First Chief's Hut\", icon: 'ğŸ›ï¸', bonusMult: 1.0 }\r\n        ],\r\n        popUnlock: 0\r\n    }\r\n};\r\n\r\n// Combined special buildings export\r\nexport const SPECIAL_BUILDINGS: Record<string, BuildingDefinition> = {\r\n    ...INFRASTRUCTURE_BUILDINGS,\r\n    ...MILESTONE_BUILDINGS,\r\n    ...LEGACY_BUILDINGS\r\n};\r\n","/**\r\n * Civil Zones - Building Database\r\n * Central registry of all building definitions\r\n */\r\n\r\nimport type { BuildingDefinition, BuildingId } from '../types/index.js';\r\nimport { RESIDENTIAL_BUILDINGS } from './buildings/residential.js';\r\nimport { COMMERCIAL_BUILDINGS } from './buildings/commercial.js';\r\nimport { INDUSTRIAL_BUILDINGS } from './buildings/industrial.js';\r\nimport { SPECIAL_BUILDINGS, MILESTONE_BUILDINGS, INFRASTRUCTURE_BUILDINGS } from './buildings/special.js';\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// COMPLETE BUILDING DATABASE\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nexport const BUILDING_DB: Record<string, BuildingDefinition> = {\r\n    ...RESIDENTIAL_BUILDINGS,\r\n    ...COMMERCIAL_BUILDINGS,\r\n    ...INDUSTRIAL_BUILDINGS,\r\n    ...SPECIAL_BUILDINGS\r\n};\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// HELPER FUNCTIONS\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\n/**\r\n * Get a building definition by ID\r\n */\r\nexport function getBuilding(id: string): BuildingDefinition | null {\r\n    return BUILDING_DB[id] || null;\r\n}\r\n\r\n/**\r\n * Get all buildings in a category\r\n */\r\nexport function getBuildingsByCategory(category: string): BuildingDefinition[] {\r\n    return Object.values(BUILDING_DB).filter(b => b.category === category);\r\n}\r\n\r\n/**\r\n * Get buildings by type prefix (RES, COM, IND, etc.)\r\n */\r\nexport function getBuildingsByType(typePrefix: string): BuildingDefinition[] {\r\n    return Object.entries(BUILDING_DB)\r\n        .filter(([id]) => id.startsWith(typePrefix))\r\n        .map(([, building]) => building);\r\n}\r\n\r\n/**\r\n * Get residential building by level number\r\n */\r\nexport function getResidentialByLevel(level: number): BuildingDefinition | null {\r\n    return BUILDING_DB[`RES_${level}`] || null;\r\n}\r\n\r\n/**\r\n * Get commercial building by level number\r\n */\r\nexport function getCommercialByLevel(level: number): BuildingDefinition | null {\r\n    return BUILDING_DB[`COM_${level}`] || null;\r\n}\r\n\r\n/**\r\n * Get industrial building by level number\r\n */\r\nexport function getIndustrialByLevel(level: number): BuildingDefinition | null {\r\n    return BUILDING_DB[`IND_${level}`] || null;\r\n}\r\n\r\n/**\r\n * Extract gather bonus from building benefits\r\n */\r\nexport function extractGatherBonus(building: BuildingDefinition): Record<string, number> {\r\n    const bonus: Record<string, number> = { wood: 0, food: 0, stone: 0, metal: 0 };\r\n    \r\n    if (!building.benefits) return bonus;\r\n    \r\n    for (const b of building.benefits) {\r\n        if (b.type === 'GATHER_BONUS' && 'resource' in b) {\r\n            bonus[b.resource] = b.value;\r\n        }\r\n    }\r\n    \r\n    return bonus;\r\n}\r\n\r\n/**\r\n * Check if a building is unlocked based on requirements\r\n */\r\nexport function isBuildingUnlocked(\r\n    buildingId: string,\r\n    population: number,\r\n    resources: Record<string, number>,\r\n    builtBuildings: Array<{ id: string; level?: number }>\r\n): boolean {\r\n    const building = BUILDING_DB[buildingId];\r\n    if (!building) return false;\r\n    \r\n    const req = building.unlockReq;\r\n    if (!req) return true;\r\n    \r\n    // Check population requirement\r\n    if (req.pop !== undefined && population < req.pop) {\r\n        return false;\r\n    }\r\n    \r\n    // Check resource requirements\r\n    if (req.resources) {\r\n        for (const [resource, amount] of Object.entries(req.resources)) {\r\n            if ((resources[resource] || 0) < amount) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    \r\n    // Check building requirements (simplified)\r\n    if (req.buildings) {\r\n        const buildingReqs = Array.isArray(req.buildings) ? req.buildings : [req.buildings];\r\n        for (const buildingReq of buildingReqs) {\r\n            if ('id' in buildingReq) {\r\n                const count = builtBuildings.filter(b => b.id === buildingReq.id).length;\r\n                if (count < buildingReq.count) return false;\r\n            }\r\n            // Add more building requirement checks as needed\r\n        }\r\n    }\r\n    \r\n    return true;\r\n}\r\n\r\n// Re-export building collections for direct access\r\nexport { \r\n    RESIDENTIAL_BUILDINGS,\r\n    COMMERCIAL_BUILDINGS,\r\n    INDUSTRIAL_BUILDINGS,\r\n    SPECIAL_BUILDINGS,\r\n    MILESTONE_BUILDINGS,\r\n    INFRASTRUCTURE_BUILDINGS\r\n};\r\n","/**\r\n * Civil Zones - Noise Generation Utilities\r\n * Perlin-like noise for terrain generation\r\n */\r\n\r\n/**\r\n * Noise generator for procedural terrain\r\n * Uses hash-based pseudo-random noise with fractal brownian motion\r\n */\r\nexport class NoiseGenerator {\r\n    private seed: number = 1;\r\n\r\n    /**\r\n     * Initialize the noise generator with a seed\r\n     */\r\n    init(seed: number): void {\r\n        this.seed = seed;\r\n    }\r\n\r\n    /**\r\n     * Hash function for pseudo-random values\r\n     */\r\n    hash(x: number, y: number): number {\r\n        const h = Math.sin(x * 12.98 + y * 78.23 + this.seed) * 43758.54;\r\n        return h - Math.floor(h);\r\n    }\r\n\r\n    /**\r\n     * Linear interpolation between two values\r\n     */\r\n    mix(a: number, b: number, t: number): number {\r\n        return a * (1 - t) + b * t;\r\n    }\r\n\r\n    /**\r\n     * Get noise value at position (smooth interpolated)\r\n     */\r\n    val(x: number, y: number): number {\r\n        const i = Math.floor(x);\r\n        const j = Math.floor(y);\r\n        const fx = x - i;\r\n        const fy = y - j;\r\n        \r\n        // Smoothstep interpolation\r\n        const ux = fx * fx * (3 - 2 * fx);\r\n        const uy = fy * fy * (3 - 2 * fy);\r\n        \r\n        const a = this.hash(i, j);\r\n        const b = this.hash(i + 1, j);\r\n        const c = this.hash(i, j + 1);\r\n        const d = this.hash(i + 1, j + 1);\r\n        \r\n        return this.mix(this.mix(a, b, ux), this.mix(c, d, ux), uy);\r\n    }\r\n\r\n    /**\r\n     * Fractal Brownian Motion - layered noise for natural terrain\r\n     * @param x X coordinate\r\n     * @param y Y coordinate\r\n     * @param octaves Number of noise layers (default 5)\r\n     * @returns Noise value 0-1\r\n     */\r\n    fbm(x: number, y: number, octaves: number = 5): number {\r\n        let total = 0;\r\n        let amplitude = 0.5;\r\n        let frequency = 1;\r\n        \r\n        for (let i = 0; i < octaves; i++) {\r\n            total += this.val(x * frequency, y * frequency) * amplitude;\r\n            frequency *= 2;\r\n            amplitude *= 0.5;\r\n        }\r\n        \r\n        return total;\r\n    }\r\n}\r\n\r\n// Singleton instance for global use\r\nexport const Noise = new NoiseGenerator();\r\n","/**\r\n * Civil Zones - Utility Functions\r\n * Common helper functions used across the game\r\n */\r\n\r\n/**\r\n * Clamp a number between min and max values\r\n */\r\nexport function clamp(value: number, min: number, max: number): number {\r\n    return Math.max(min, Math.min(max, value));\r\n}\r\n\r\n/**\r\n * Linear interpolation between two values\r\n */\r\nexport function lerp(a: number, b: number, t: number): number {\r\n    return a + (b - a) * clamp(t, 0, 1);\r\n}\r\n\r\n/**\r\n * Smooth step function (ease in/out)\r\n */\r\nexport function smoothstep(edge0: number, edge1: number, x: number): number {\r\n    const t = clamp((x - edge0) / (edge1 - edge0), 0, 1);\r\n    return t * t * (3 - 2 * t);\r\n}\r\n\r\n/**\r\n * Format large numbers with K/M/B suffixes\r\n */\r\nexport function formatNumber(num: number): string {\r\n    if (num >= 1_000_000_000) {\r\n        return (num / 1_000_000_000).toFixed(1) + 'B';\r\n    }\r\n    if (num >= 1_000_000) {\r\n        return (num / 1_000_000).toFixed(1) + 'M';\r\n    }\r\n    if (num >= 1_000) {\r\n        return (num / 1_000).toFixed(1) + 'K';\r\n    }\r\n    return num.toFixed(0);\r\n}\r\n\r\n/**\r\n * Format a number with commas (1234567 -> \"1,234,567\")\r\n */\r\nexport function formatWithCommas(num: number): string {\r\n    return num.toLocaleString();\r\n}\r\n\r\n/**\r\n * Generate a unique ID\r\n */\r\nexport function generateUID(): string {\r\n    return Date.now().toString(36) + Math.random().toString(36).substr(2);\r\n}\r\n\r\n/**\r\n * Calculate Manhattan distance between two points\r\n */\r\nexport function manhattanDistance(x1: number, y1: number, x2: number, y2: number): number {\r\n    return Math.abs(x1 - x2) + Math.abs(y1 - y2);\r\n}\r\n\r\n/**\r\n * Calculate Euclidean distance between two points\r\n */\r\nexport function euclideanDistance(x1: number, y1: number, x2: number, y2: number): number {\r\n    const dx = x2 - x1;\r\n    const dy = y2 - y1;\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n}\r\n\r\n/**\r\n * Check if a point is within a circle\r\n */\r\nexport function isInCircle(px: number, py: number, cx: number, cy: number, radius: number): boolean {\r\n    return euclideanDistance(px, py, cx, cy) <= radius;\r\n}\r\n\r\n/**\r\n * Check if a point is within bounds\r\n */\r\nexport function isInBounds(x: number, y: number, width: number, height: number): boolean {\r\n    return x >= 0 && x < width && y >= 0 && y < height;\r\n}\r\n\r\n/**\r\n * Deep clone an object (JSON-safe only)\r\n */\r\nexport function deepClone<T>(obj: T): T {\r\n    return JSON.parse(JSON.stringify(obj));\r\n}\r\n\r\n/**\r\n * Random integer in range [min, max] inclusive\r\n */\r\nexport function randomInt(min: number, max: number): number {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\n/**\r\n * Random float in range [min, max)\r\n */\r\nexport function randomFloat(min: number, max: number): number {\r\n    return Math.random() * (max - min) + min;\r\n}\r\n\r\n/**\r\n * Pick a random element from an array\r\n */\r\nexport function randomPick<T>(arr: T[]): T | undefined {\r\n    if (arr.length === 0) return undefined;\r\n    return arr[Math.floor(Math.random() * arr.length)];\r\n}\r\n\r\n/**\r\n * Shuffle an array in place (Fisher-Yates)\r\n */\r\nexport function shuffle<T>(arr: T[]): T[] {\r\n    for (let i = arr.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [arr[i], arr[j]] = [arr[j], arr[i]];\r\n    }\r\n    return arr;\r\n}\r\n\r\n/**\r\n * Debounce function - delays execution until after wait milliseconds\r\n */\r\nexport function debounce<T extends (...args: unknown[]) => void>(\r\n    func: T,\r\n    wait: number\r\n): (...args: Parameters<T>) => void {\r\n    let timeout: ReturnType<typeof setTimeout> | null = null;\r\n    \r\n    return function (...args: Parameters<T>): void {\r\n        if (timeout) clearTimeout(timeout);\r\n        timeout = setTimeout(() => func(...args), wait);\r\n    };\r\n}\r\n\r\n/**\r\n * Throttle function - limits execution to once per wait milliseconds\r\n */\r\nexport function throttle<T extends (...args: unknown[]) => void>(\r\n    func: T,\r\n    wait: number\r\n): (...args: Parameters<T>) => void {\r\n    let lastTime = 0;\r\n    \r\n    return function (...args: Parameters<T>): void {\r\n        const now = Date.now();\r\n        if (now - lastTime >= wait) {\r\n            lastTime = now;\r\n            func(...args);\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * Seeded random number generator\r\n * Uses mulberry32 algorithm\r\n */\r\nexport function createSeededRandom(seed: number): () => number {\r\n    return function(): number {\r\n        seed |= 0;\r\n        seed = seed + 0x6D2B79F5 | 0;\r\n        let t = Math.imul(seed ^ seed >>> 15, 1 | seed);\r\n        t = t + Math.imul(t ^ t >>> 7, 61 | t) ^ t;\r\n        return ((t ^ t >>> 14) >>> 0) / 4294967296;\r\n    };\r\n}\r\n\r\n/**\r\n * Get adjacent tile coordinates (4-way: up, down, left, right)\r\n */\r\nexport function getAdjacent4(x: number, y: number): Array<{x: number; y: number}> {\r\n    return [\r\n        { x: x, y: y - 1 },  // up\r\n        { x: x, y: y + 1 },  // down\r\n        { x: x - 1, y: y },  // left\r\n        { x: x + 1, y: y }   // right\r\n    ];\r\n}\r\n\r\n/**\r\n * Get adjacent tile coordinates (8-way: includes diagonals)\r\n */\r\nexport function getAdjacent8(x: number, y: number): Array<{x: number; y: number}> {\r\n    return [\r\n        { x: x - 1, y: y - 1 }, { x: x, y: y - 1 }, { x: x + 1, y: y - 1 },\r\n        { x: x - 1, y: y },                         { x: x + 1, y: y },\r\n        { x: x - 1, y: y + 1 }, { x: x, y: y + 1 }, { x: x + 1, y: y + 1 }\r\n    ];\r\n}\r\n\r\n/**\r\n * Calculate percentage (0-100)\r\n */\r\nexport function percent(value: number, max: number): number {\r\n    if (max === 0) return 0;\r\n    return clamp((value / max) * 100, 0, 100);\r\n}\r\n\r\n/**\r\n * Convert ratio (0-1) to percentage string\r\n */\r\nexport function toPercentString(ratio: number, decimals: number = 0): string {\r\n    return (ratio * 100).toFixed(decimals) + '%';\r\n}\r\n","/**\r\n * Civil Zones - Terrain Generator\r\n * Procedural terrain generation with elevation-based water system\r\n */\r\n\r\nimport type { \r\n    Tile, \r\n    TerrainType, \r\n    HighGroundPatch,\r\n    TerrainGenConfig \r\n} from '../types/index.js';\r\nimport { Noise } from './noise.js';\r\nimport { clamp, randomFloat } from './utils.js';\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// DEFAULT CONFIGURATION\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nconst DEFAULT_CONFIG: TerrainGenConfig = {\r\n    seed: 1,\r\n    width: 250,\r\n    height: 250,\r\n    seaLevelBase: 3,\r\n    patchSize: 8,\r\n    numPatches: 25  // ~1 per 50x50 area\r\n};\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// TERRAIN GENERATOR CLASS\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nexport class TerrainGenerator {\r\n    private config: TerrainGenConfig;\r\n    private highGroundPatches: HighGroundPatch[] = [];\r\n\r\n    constructor(config: Partial<TerrainGenConfig> = {}) {\r\n        this.config = { ...DEFAULT_CONFIG, ...config };\r\n    }\r\n\r\n    /**\r\n     * Generate high ground patches (safe zones that never flood)\r\n     */\r\n    private generateHighGroundPatches(): void {\r\n        this.highGroundPatches = [];\r\n        const { width, height, patchSize, numPatches } = this.config;\r\n        \r\n        for (let i = 0; i < numPatches; i++) {\r\n            const px = Math.floor(Math.random() * (width - patchSize - 10)) + 5;\r\n            const py = Math.floor(Math.random() * (height - patchSize - 10)) + 5;\r\n            this.highGroundPatches.push({ x: px, y: py });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check if coordinates are in a high ground patch\r\n     */\r\n    private isInHighGroundPatch(x: number, y: number): boolean {\r\n        const { patchSize } = this.config;\r\n        \r\n        for (const patch of this.highGroundPatches) {\r\n            if (x >= patch.x && x < patch.x + patchSize &&\r\n                y >= patch.y && y < patch.y + patchSize) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Determine terrain type based on elevation and noise\r\n     */\r\n    private determineTerrainType(\r\n        x: number, \r\n        y: number, \r\n        elevation: number,\r\n        seaLevel: number\r\n    ): TerrainType {\r\n        // Mountain noise\r\n        const mountainNoise = Noise.fbm(x * 0.015 + 1000, y * 0.015 + 1000) / 1.8;\r\n        const baseHeight = Noise.fbm(x * 0.02, y * 0.02) / 1.8;\r\n        \r\n        // Lake noise (inland water bodies)\r\n        const lakeNoise = Noise.fbm(x * 0.08 + 500, y * 0.08 + 500) / 1.8;\r\n        \r\n        // River noise\r\n        const riverNoise = Noise.fbm(x * 0.05 + 100, y * 0.05 + 100) / 1.8;\r\n        const isRiver = Math.abs(riverNoise - 0.5) < 0.015;\r\n\r\n        // Impassable stone mountains\r\n        if (mountainNoise > 0.68 && baseHeight > 0.55) {\r\n            return 'STONE';\r\n        }\r\n        \r\n        // Deep water\r\n        if (elevation < seaLevel - 1.5) {\r\n            return 'DEEP';\r\n        }\r\n        \r\n        // Shallow water\r\n        if (elevation < seaLevel - 0.5) {\r\n            return 'WATER';\r\n        }\r\n        \r\n        // Inland lakes\r\n        if (lakeNoise < 0.03 && elevation >= seaLevel && elevation < seaLevel + 0.5) {\r\n            return 'WATER';\r\n        }\r\n        \r\n        // Rivers (avoid deep ocean and high ground)\r\n        if (isRiver && !this.isInHighGroundPatch(x, y)) {\r\n            return 'RIVER';\r\n        }\r\n        \r\n        // Beaches\r\n        if (elevation <= seaLevel) {\r\n            return 'SAND';\r\n        }\r\n        \r\n        // Elevation-based terrain\r\n        if (elevation < 7) {\r\n            return 'GRASS';\r\n        }\r\n        if (elevation < 8) {\r\n            return 'FOREST';\r\n        }\r\n        if (elevation < 9.5) {\r\n            return 'ROCK';\r\n        }\r\n        \r\n        return 'SNOW';\r\n    }\r\n\r\n    /**\r\n     * Calculate elevation for a tile\r\n     */\r\n    private calculateElevation(x: number, y: number): number {\r\n        const h = Noise.fbm(x * 0.02, y * 0.02) / 1.8;\r\n        \r\n        // Upward bias for more habitable land\r\n        let elevation = Math.round((h * 100 + 25)) / 10;\r\n        elevation = clamp(elevation, 0, 10);\r\n        \r\n        // High ground patches are always safe\r\n        if (this.isInHighGroundPatch(x, y)) {\r\n            elevation = 7 + randomFloat(0, 1.5);\r\n        }\r\n        \r\n        return elevation;\r\n    }\r\n\r\n    /**\r\n     * Generate a complete tile\r\n     */\r\n    private generateTile(x: number, y: number, seaLevel: number): Tile {\r\n        let elevation = this.calculateElevation(x, y);\r\n        let type = this.determineTerrainType(x, y, elevation, seaLevel);\r\n        \r\n        // Adjust elevation for specific terrain types\r\n        if (type === 'STONE') {\r\n            elevation = 9 + Math.floor(Math.random() * 2);\r\n        } else if (type === 'DEEP') {\r\n            elevation = Math.max(0, elevation);\r\n        } else if (type === 'WATER' && elevation >= seaLevel) {\r\n            // Lakes are at water level\r\n            elevation = seaLevel - 0.5;\r\n        } else if (type === 'RIVER') {\r\n            elevation = seaLevel;\r\n        }\r\n        \r\n        // Trees spawn on appropriate terrain\r\n        const canHaveTree = type === 'GRASS' || type === 'FOREST' || type === 'SNOW';\r\n        const hasTree = canHaveTree && Math.random() > 0.8;\r\n        \r\n        const tile: Tile = {\r\n            type,\r\n            originalType: type,\r\n            elevation,\r\n            road: false,\r\n            tree: hasTree,\r\n            pol: 0,\r\n            bld: null,\r\n            explored: false,\r\n            zone: null,\r\n            building: null,\r\n            resource: null,\r\n            stoneDeposit: null,\r\n            entity: null\r\n        };\r\n        \r\n        // Stone tiles contain massive resources\r\n        if (type === 'STONE') {\r\n            tile.resource = {\r\n                type: 'STONE',\r\n                amount: 1000000 + Math.floor(Math.random() * 500000),\r\n                metal_yield: 0.2\r\n            };\r\n        }\r\n        \r\n        return tile;\r\n    }\r\n\r\n    /**\r\n     * Generate the complete terrain grid\r\n     */\r\n    generate(seed?: number): Tile[][] {\r\n        if (seed !== undefined) {\r\n            this.config.seed = seed;\r\n        }\r\n        \r\n        Noise.init(this.config.seed);\r\n        this.generateHighGroundPatches();\r\n        \r\n        const { width, height, seaLevelBase } = this.config;\r\n        const tiles: Tile[][] = [];\r\n        \r\n        for (let x = 0; x < width; x++) {\r\n            tiles[x] = [];\r\n            for (let y = 0; y < height; y++) {\r\n                tiles[x][y] = this.generateTile(x, y, seaLevelBase);\r\n            }\r\n        }\r\n        \r\n        return tiles;\r\n    }\r\n\r\n    /**\r\n     * Get high ground patches (for UI/debug)\r\n     */\r\n    getHighGroundPatches(): HighGroundPatch[] {\r\n        return [...this.highGroundPatches];\r\n    }\r\n}\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// TERRAIN HELPERS\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\n/**\r\n * Check if terrain is passable on foot\r\n */\r\nexport function isTerrainPassable(type: TerrainType): boolean {\r\n    return type !== 'WATER' && type !== 'DEEP' && type !== 'STONE';\r\n}\r\n\r\n/**\r\n * Check if terrain is buildable\r\n */\r\nexport function isTerrainBuildable(type: TerrainType): boolean {\r\n    return type === 'GRASS' || type === 'SAND' || type === 'FOREST';\r\n}\r\n\r\n/**\r\n * Check if terrain is water\r\n */\r\nexport function isWater(type: TerrainType): boolean {\r\n    return type === 'WATER' || type === 'DEEP' || type === 'RIVER';\r\n}\r\n\r\n/**\r\n * Get terrain color for rendering\r\n */\r\nexport function getTerrainColor(type: TerrainType): string {\r\n    const colors: Record<TerrainType, string> = {\r\n        'GRASS': '#4a7c23',\r\n        'FOREST': '#2d5016',\r\n        'SAND': '#c2b280',\r\n        'ROCK': '#6b6b6b',\r\n        'STONE': '#4a4a4a',\r\n        'SNOW': '#f0f0f0',\r\n        'WATER': '#4a90d9',\r\n        'DEEP': '#1a5276',\r\n        'RIVER': '#5dade2'\r\n    };\r\n    return colors[type] || '#888888';\r\n}\r\n\r\n/**\r\n * Get terrain movement cost\r\n */\r\nexport function getTerrainMoveCost(type: TerrainType): number {\r\n    const costs: Record<TerrainType, number> = {\r\n        'GRASS': 1,\r\n        'FOREST': 1.5,\r\n        'SAND': 1.2,\r\n        'ROCK': 2,\r\n        'STONE': Infinity,\r\n        'SNOW': 1.5,\r\n        'WATER': Infinity,\r\n        'DEEP': Infinity,\r\n        'RIVER': 2\r\n    };\r\n    return costs[type] || 1;\r\n}\r\n","/**\r\n * Civil Zones - Spatial Grid\r\n * Fast spatial lookup for buildings and entities\r\n */\r\n\r\n/**\r\n * Generic spatial grid for fast proximity queries\r\n * Divides the map into cells for O(1) regional lookups\r\n */\r\nexport class SpatialGrid<T> {\r\n    private grid: T[][][];\r\n    private cellSize: number;\r\n    private width: number;\r\n    private height: number;\r\n\r\n    /**\r\n     * Create a new spatial grid\r\n     * @param mapWidth Map width in tiles\r\n     * @param mapHeight Map height in tiles\r\n     * @param cellSize Size of each grid cell in tiles (default 16)\r\n     */\r\n    constructor(mapWidth: number, mapHeight: number, cellSize: number = 16) {\r\n        this.cellSize = cellSize;\r\n        this.width = Math.ceil(mapWidth / cellSize);\r\n        this.height = Math.ceil(mapHeight / cellSize);\r\n        \r\n        this.grid = [];\r\n        for (let i = 0; i < this.width; i++) {\r\n            this.grid[i] = [];\r\n            for (let j = 0; j < this.height; j++) {\r\n                this.grid[i][j] = [];\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Convert tile coordinates to grid cell coordinates\r\n     */\r\n    private toGridCoords(x: number, y: number): { gx: number; gy: number } {\r\n        return {\r\n            gx: Math.floor(x / this.cellSize),\r\n            gy: Math.floor(y / this.cellSize)\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Check if grid coordinates are valid\r\n     */\r\n    private isValidGridCoord(gx: number, gy: number): boolean {\r\n        return gx >= 0 && gy >= 0 && gx < this.width && gy < this.height;\r\n    }\r\n\r\n    /**\r\n     * Add an object to the grid at tile position\r\n     */\r\n    add(x: number, y: number, obj: T): void {\r\n        const { gx, gy } = this.toGridCoords(x, y);\r\n        if (this.isValidGridCoord(gx, gy)) {\r\n            this.grid[gx][gy].push(obj);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Remove an object from the grid at tile position\r\n     */\r\n    remove(x: number, y: number, obj: T): boolean {\r\n        const { gx, gy } = this.toGridCoords(x, y);\r\n        if (!this.isValidGridCoord(gx, gy)) return false;\r\n        \r\n        const idx = this.grid[gx][gy].indexOf(obj);\r\n        if (idx !== -1) {\r\n            this.grid[gx][gy].splice(idx, 1);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Get all objects in a cell at tile position\r\n     */\r\n    getAt(x: number, y: number): T[] {\r\n        const { gx, gy } = this.toGridCoords(x, y);\r\n        if (!this.isValidGridCoord(gx, gy)) return [];\r\n        return [...this.grid[gx][gy]];\r\n    }\r\n\r\n    /**\r\n     * Get all objects within radius of tile position\r\n     */\r\n    getNearby(x: number, y: number, radius: number = 1): T[] {\r\n        const { gx, gy } = this.toGridCoords(x, y);\r\n        const gridRadius = Math.ceil(radius / this.cellSize);\r\n        const nearby: T[] = [];\r\n        \r\n        for (let dx = -gridRadius; dx <= gridRadius; dx++) {\r\n            for (let dy = -gridRadius; dy <= gridRadius; dy++) {\r\n                const gxi = gx + dx;\r\n                const gyi = gy + dy;\r\n                if (this.isValidGridCoord(gxi, gyi)) {\r\n                    nearby.push(...this.grid[gxi][gyi]);\r\n                }\r\n            }\r\n        }\r\n        \r\n        return nearby;\r\n    }\r\n\r\n    /**\r\n     * Get all objects in the grid\r\n     */\r\n    getAll(): T[] {\r\n        const all: T[] = [];\r\n        for (let i = 0; i < this.width; i++) {\r\n            for (let j = 0; j < this.height; j++) {\r\n                all.push(...this.grid[i][j]);\r\n            }\r\n        }\r\n        return all;\r\n    }\r\n\r\n    /**\r\n     * Clear the entire grid\r\n     */\r\n    clear(): void {\r\n        for (let i = 0; i < this.width; i++) {\r\n            for (let j = 0; j < this.height; j++) {\r\n                this.grid[i][j] = [];\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get count of objects in the grid\r\n     */\r\n    count(): number {\r\n        let total = 0;\r\n        for (let i = 0; i < this.width; i++) {\r\n            for (let j = 0; j < this.height; j++) {\r\n                total += this.grid[i][j].length;\r\n            }\r\n        }\r\n        return total;\r\n    }\r\n}\r\n\r\n/**\r\n * Object pool for reusing temporary objects\r\n * Reduces garbage collection pressure\r\n */\r\nexport class ObjectPool<T extends { active: boolean }> {\r\n    private pool: T[] = [];\r\n    private factory: () => T;\r\n\r\n    constructor(factory: () => T, initialSize: number = 100) {\r\n        this.factory = factory;\r\n        \r\n        // Pre-populate pool\r\n        for (let i = 0; i < initialSize; i++) {\r\n            const obj = factory();\r\n            obj.active = false;\r\n            this.pool.push(obj);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get an object from the pool (or create new if exhausted)\r\n     */\r\n    acquire(): T {\r\n        for (const obj of this.pool) {\r\n            if (!obj.active) {\r\n                obj.active = true;\r\n                return obj;\r\n            }\r\n        }\r\n        \r\n        // Pool exhausted, create new\r\n        const obj = this.factory();\r\n        obj.active = true;\r\n        this.pool.push(obj);\r\n        return obj;\r\n    }\r\n\r\n    /**\r\n     * Return an object to the pool\r\n     */\r\n    release(obj: T): void {\r\n        obj.active = false;\r\n    }\r\n\r\n    /**\r\n     * Release all objects back to the pool\r\n     */\r\n    releaseAll(): void {\r\n        for (const obj of this.pool) {\r\n            obj.active = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get all active objects\r\n     */\r\n    getActive(): T[] {\r\n        return this.pool.filter(obj => obj.active);\r\n    }\r\n\r\n    /**\r\n     * Get pool statistics\r\n     */\r\n    getStats(): { total: number; active: number; available: number } {\r\n        const active = this.pool.filter(obj => obj.active).length;\r\n        return {\r\n            total: this.pool.length,\r\n            active,\r\n            available: this.pool.length - active\r\n        };\r\n    }\r\n}\r\n\r\n/**\r\n * Particle object interface for pooling\r\n */\r\nexport interface Particle {\r\n    x: number;\r\n    y: number;\r\n    vx: number;\r\n    vy: number;\r\n    life: number;\r\n    maxLife: number;\r\n    color: string;\r\n    size: number;\r\n    active: boolean;\r\n}\r\n\r\n/**\r\n * Create a particle pool\r\n */\r\nexport function createParticlePool(size: number = 500): ObjectPool<Particle> {\r\n    return new ObjectPool<Particle>(() => ({\r\n        x: 0,\r\n        y: 0,\r\n        vx: 0,\r\n        vy: 0,\r\n        life: 0,\r\n        maxLife: 1,\r\n        color: '#ffffff',\r\n        size: 2,\r\n        active: false\r\n    }), size);\r\n}\r\n"],"names":["MAP_CONFIG","INVENTORY","VISUAL_STATES","BULLDOZE_REFUND","ZONE_COST","CHIEF_COST","CHIEF_RADIUS","CHIEF_BONUS","GROWTH_THRESHOLD","DECAY_THRESHOLD","EFFICIENCY","DESIRABILITY","ZONE_BONUSES","GOLD_EXCHANGE_RATE","ERAS","BUILDING_CATEGORIES","RESIDENTIAL_BUILDINGS","COMMERCIAL_BUILDINGS","INDUSTRIAL_BUILDINGS","INFRASTRUCTURE_BUILDINGS","MILESTONE_BUILDINGS","LEGACY_BUILDINGS","SPECIAL_BUILDINGS","BUILDING_DB","getBuilding","id","getBuildingsByCategory","category","b","getBuildingsByType","typePrefix","building","getResidentialByLevel","level","getCommercialByLevel","getIndustrialByLevel","extractGatherBonus","bonus","isBuildingUnlocked","buildingId","population","resources","builtBuildings","req","resource","amount","buildingReqs","buildingReq","NoiseGenerator","seed","x","y","h","a","i","j","fx","fy","ux","uy","c","d","octaves","total","amplitude","frequency","Noise","clamp","value","min","max","lerp","t","smoothstep","edge0","edge1","formatNumber","num","formatWithCommas","generateUID","manhattanDistance","x1","y1","x2","y2","euclideanDistance","dx","dy","isInCircle","px","py","cx","cy","radius","isInBounds","width","height","deepClone","obj","randomInt","randomFloat","randomPick","arr","shuffle","debounce","func","wait","timeout","args","throttle","lastTime","now","createSeededRandom","getAdjacent4","getAdjacent8","percent","toPercentString","ratio","decimals","DEFAULT_CONFIG","TerrainGenerator","config","patchSize","numPatches","patch","elevation","seaLevel","mountainNoise","baseHeight","lakeNoise","riverNoise","isRiver","type","hasTree","tile","seaLevelBase","tiles","isTerrainPassable","isTerrainBuildable","isWater","getTerrainColor","getTerrainMoveCost","SpatialGrid","mapWidth","mapHeight","cellSize","gx","gy","idx","gridRadius","nearby","gxi","gyi","all","ObjectPool","factory","initialSize","active","createParticlePool","size"],"mappings":"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"}